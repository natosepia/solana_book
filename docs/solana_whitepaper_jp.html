<!DOCTYPE html><html><head>
      <title>solana_whitepaper_jp</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
.markdown-preview.markdown-preview body {
  font-family: "Segoe UI", "Yu Gothic UI", "Meiryo", sans-serif;
  font-weight: 400;
  font-size: 0.9rem;
  line-height: 110%;
}
.markdown-preview.markdown-preview h1 {
  counter-reset: chapter;
  font-size: 1.8em;
  border-style: solid;
  border-width: 3px 0 3px 0;
}
.markdown-preview.markdown-preview h2 {
  counter-reset: sub-chapter;
  border-style: solid;
  border-width: 0 0 2px 10px;
  padding-left: 0.5rem;
  font-size: 1.5em;
}
.markdown-preview.markdown-preview h3 {
  counter-reset: section;
  font-size: 1em;
  border-style: solid;
  border-width: 0 0 2px 0;
}
.markdown-preview.markdown-preview h4 {
  counter-reset: section;
  font-size: 1em;
  border-style: dotted;
  border-width: 0 0 1px 0;
}
.markdown-preview.markdown-preview h5,
.markdown-preview.markdown-preview h6 {
  font-size: 1em;
  font-weight: 400;
}
.markdown-preview.markdown-preview [class*="language"] {
  font-family: "MyricaM M";
}
.markdown-preview.markdown-preview .task-list-item-checkbox {
  font-family: "Yu-Gothic-UI";
  font-size: smaller;
}
.markdown-preview.markdown-preview p {
  text-indent: 0.9em;
}
.markdown-preview.markdown-preview strong {
  color: #a11;
}
.markdown-preview.markdown-preview code {
  font-size: 0.8em;
  line-height: 0px;
}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p>Solanaブロックチェーンホワイトペーパーの和訳（逐次訳）です。</p>
<h1 id="solana-高性能blockchainのための新アーキテクチャ--v0813">Solana: 高性能BlockChainのための新アーキテクチャ  v0.8.13 </h1>
<p>原本：<a href="https://solana.com/solana-whitepaper.pdf">https://solana.com/solana-whitepaper.pdf</a></p>
<p>著者: Anatoly Yakovenko</p>
<h2 id="法的免責事項legal-disclaimer">法的免責事項（Legal Disclaimer） </h2>
<p>本ホワイトペーパーはトークンの販売を勧誘するものではなく、フィードバックの取得を目的として公開されています。将来的にトークンの販売を行う場合、最新版のホワイトペーパーと詳細な開示資料が提供され、その内容は本稿と大きく異なる可能性があります。将来予測に関する記述は、Solana の現時点の分析に基づくものであり、実際の結果と異なる場合があります。</p>
<h2 id="概要abstract">概要（Abstract） </h2>
<p>本稿は Proof of History (PoH) という概念に基づく新しいブロックチェーン・アーキテクチャを提案する。<br>
PoH はイベント間の順序と経過時間を検証するための「時間の証明」であり、改ざん不可能な台帳へと組み込まれる。<br>
PoH を Proof of Work や Proof of Stake と組み合わせることで、ビザンチン耐性を保ちつつメッセージ伝搬のオーバーヘッドを削減し、取引がほぼリアルタイム(1秒未満)で確定する。</p>
<p>さらに本稿では PoH の時間管理機能を活用した 2 つのアルゴリズム――</p>
<ul>
<li>分割耐性を持つ PoS コンセンサス</li>
<li>ストリーミング型 Proof of Replication (PoRep)</li>
</ul>
<p>――を提示する。</p>
<p>PoH と PoRep の組み合わせにより、台帳の時間的順序とストレージに関する改ざんを防ぐことができる。<br>
1 Gbps ネットワーク上の解析では、今日入手可能なハードウェアで 710,000 TPS のスループットが可能であることを示す。</p>
<h2 id="1-introduction">1. Introduction </h2>
<p>ブロックチェーンは、フォールトトレラントなレプリケート・ステートマシン（耐障害性を備えた複製状態機械）の実装である。
現在公開されているブロックチェーンは、時間に依存していないか、参加者が時刻を保持できるという弱い仮定に基づいている<a href="#ref-04">［4, 5］</a>。
ネットワーク内の各ノードは通常、自身のローカルクロックに依存しており、ネットワーク内の他の参加者のクロックについては把握していない。</p>
<p>信頼できる時間の情報源が存在しないため、あるメッセージのタイムスタンプに基づいてそのメッセージを受け入れるか拒否する判断を下す場合でも、ネットワーク内のすべての参加者がまったく同じ判断を下す保証はない。</p>
<p>本稿で提案する PoH（Proof of History）は、イベント間の経過時間やメッセージの順序といった 時間の経過を検証可能な台帳 を作成することを目的として設計されている。
この台帳に記録された時間の経過に、ネットワーク内のすべてのノードが 信頼に依存せずに 拠ることができるようになることが想定されている。</p>
<h2 id="2-outline">2. Outline </h2>
<p>本稿の残りの部分は、以下のように構成されている。</p>
<ul>
<li>
<p>第3章：全体のシステム設計を説明。</p>
</li>
<li>
<p>第4章：Proof of History（PoH） の詳細な説明。</p>
</li>
<li>
<p>第5章：提案する Proof of Stake コンセンサス・アルゴリズム の詳細について説明。</p>
</li>
<li>
<p>第6章：提案する 高速な Proof of Replication（PoRep） の詳細について説明。</p>
</li>
<li>
<p>第7章：システムアーキテクチャと性能の上限 についての分析。</p>
</li>
<li>
<p>第7.5章：高性能かつGPUフレンドリーなスマートコントラクト・エンジンの記述する。</p>
</li>
</ul>
<h2 id="3-network-design">3. Network Design </h2>
<p>図1に示すように、任意の時点において、システム内のノードのうちの1つが リーダー（Leader） に指定され、Proof of History（PoH）列を生成する役割を担う。<br>
これにより、ネットワーク全体に対して一貫した読み取り（グローバル・リード・コンシステンシー）と検証可能な時間の経過が提供される。</p>
<p>リーダーはユーザーメッセージを逐次的に並べ、他のノードが効率的に処理できるように順序付けを行うことで、スループット（処理能力）を最大化する。</p>
<p>リーダーは、RAMに保持されている現在の状態（ステート）に対してトランザクションを実行し、そのトランザクションと最終状態の署名を、「ベリファイア（Verifiers）」と呼ばれる複製ノードに公開する。</p>
<p>ベリファイアは、自身が保持する状態のコピーに対して同じトランザクションを実行し、結果として得られた状態に対する署名を 確認情報（confirmations） として公開する。</p>
<p>このようにして公開された確認情報は、コンセンサス・アルゴリズムにおける投票（votes） として機能する。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="515px" preserveAspectRatio="none" style="width:986px;height:515px;background:#FFFFFF;" version="1.1" viewBox="0 0 986 515" width="986px" zoomAndPan="magnify"><defs></defs><g><!--entity Tx1--><g class="entity" data-entity="Tx1" data-source-line="20" data-uid="ent0002" id="entity_Tx1"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6396" x="214.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6396" x="224.5" y="29.3184">Transaction 1</text></g><!--entity Tx2--><g class="entity" data-entity="Tx2" data-source-line="21" data-uid="ent0003" id="entity_Tx2"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6396" x="160.5" y="101"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6396" x="170.5" y="123.3184">Transaction 2</text></g><!--entity Tx3--><g class="entity" data-entity="Tx3" data-source-line="22" data-uid="ent0004" id="entity_Tx3"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6396" x="71.5" y="202"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6396" x="81.5" y="224.3184">Transaction 3</text></g><!--entity Tx1aft--><g class="entity" data-entity="Tx1aft" data-source-line="23" data-uid="ent0005" id="entity_Tx1aft"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6396" x="580.5" y="202"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6396" x="590.5" y="224.3184">Transaction 1</text></g><!--entity Tx2aft--><g class="entity" data-entity="Tx2aft" data-source-line="24" data-uid="ent0006" id="entity_Tx2aft"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6396" x="725.5" y="202"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6396" x="735.5" y="224.3184">Transaction 2</text></g><!--entity Tx3aft--><g class="entity" data-entity="Tx3aft" data-source-line="25" data-uid="ent0007" id="entity_Tx3aft"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109.6396" x="870.5" y="202"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.6396" x="880.5" y="224.3184">Transaction 3</text></g><!--entity LDR--><g class="entity" data-entity="LDR" data-source-line="27" data-uid="ent0008" id="entity_LDR"><polygon fill="#FFB6C1" points="430.5,219,377,200,270,200,216.5,219,270,238,377,238,430.5,219" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.9053" x="301.0913" y="217.3184">Leader</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.0439" x="270.022" y="231.3184">(PoH Generator)</text></g><!--entity State1--><g class="entity" data-entity="State1" data-source-line="29" data-uid="ent0009" id="entity_State1"><rect fill="#E6E6FA" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.7529" x="465.5" y="195"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5439" x="488.6045" y="217.3184">State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.7529" x="475.5" y="231.3184">0x23432</text></g><!--entity State2--><g class="entity" data-entity="State2" data-source-line="30" data-uid="ent0010" id="entity_State2"><rect fill="#E6E6FA" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.7529" x="489.5" y="438"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5439" x="512.6045" y="460.3184">State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.7529" x="499.5" y="474.3184">0x23432</text></g><!--entity State3--><g class="entity" data-entity="State3" data-source-line="31" data-uid="ent0011" id="entity_State3"><rect fill="#E6E6FA" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.7529" x="348.5" y="438"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5439" x="371.6045" y="460.3184">State</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.7529" x="358.5" y="474.3184">0x23432</text></g><!--entity veri1--><g class="entity" data-entity="veri1" data-source-line="33" data-uid="ent0012" id="entity_veri1"><path d="M732.5,329 C732.5,319 772.3286,319 772.3286,319 C772.3286,319 812.1572,319 812.1572,329 L812.1572,352 C812.1572,362 772.3286,362 772.3286,362 C772.3286,362 732.5,362 732.5,352 L732.5,329" fill="#FFFACD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M732.5,329 C732.5,339 772.3286,339 772.3286,339 C772.3286,339 812.1572,339 812.1572,329" fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.6572" x="742.5" y="355.3184">Verifier 1</text></g><!--entity veri2--><g class="entity" data-entity="veri2" data-source-line="34" data-uid="ent0013" id="entity_veri2"><path d="M602.5,329 C602.5,319 642.3286,319 642.3286,319 C642.3286,319 682.1572,319 682.1572,329 L682.1572,352 C682.1572,362 642.3286,362 642.3286,362 C642.3286,362 602.5,362 602.5,352 L602.5,329" fill="#FFFACD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M602.5,329 C602.5,339 642.3286,339 642.3286,339 C642.3286,339 682.1572,339 682.1572,329" fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.6572" x="612.5" y="355.3184">Verifier 2</text></g><g class="entity" data-entity="GMN33" data-source-line="61" data-uid="ent0034" id="entity_GMN33"><path d="M6,303 L6,378 A0,0 0 0 0 6,378 L247.4033,378 A0,0 0 0 0 247.4033,378 L247.4033,313 L237.4033,303 L130.5,303 L126.5,236.12 L122.5,303 L6,303 A0,0 0 0 0 6,303" fill="none" style="stroke:none;stroke-width:0.5;"></path><path d="M237.4033,303 L237.4033,313 L247.4033,313 L237.4033,303" fill="none" style="stroke:none;stroke-width:0.5;"></path><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.4033" x="12" y="319.4385">1.ユーザーによって送信されるメッセージ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.5103" x="12" y="332.4385">&nbsp;</text><text fill="#FF7F50" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209.9995" x="12" y="345.4385">2.レプリケータノードへの順序付き出力</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3.5103" x="12" y="358.4385">&nbsp;</text><text fill="#9932CC" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.7354" x="12" y="371.4385">3.状態を確定するための投票</text></g><!--link Tx1 to Tx2--><!--link Tx2 to Tx3--><!--link Tx1 to LDR--><g class="link" data-entity-1="Tx1" data-entity-2="LDR" data-source-line="39" data-uid="lnk16" id="link_Tx1_LDR"><path d="M274.01,41.12 C284,76.82 306.3026,156.5421 316.8026,194.0521" fill="none" id="Tx1-to-LDR" style="stroke:#FF0000;stroke-width:1;"></path><polygon fill="#FF0000" points="318.42,199.83,319.8459,190.0849,317.0722,195.0151,312.142,192.2414,318.42,199.83" style="stroke:#FF0000;stroke-width:1;"></polygon></g><!--link Tx2 to LDR--><g class="link" data-entity-1="Tx2" data-entity-2="LDR" data-source-line="40" data-uid="lnk17" id="link_Tx2_LDR"><path d="M233.33,135.35 C252.75,153.14 279.2777,177.455 299.3877,195.895" fill="none" id="Tx2-to-LDR" style="stroke:#FF0000;stroke-width:1;"></path><polygon fill="#FF0000" points="303.81,199.95,299.8799,190.9192,300.1248,196.5708,294.4732,196.8156,303.81,199.95" style="stroke:#FF0000;stroke-width:1;"></polygon></g><!--link Tx3 to LDR--><g class="link" data-entity-1="Tx3" data-entity-2="LDR" data-source-line="41" data-uid="lnk18" id="link_Tx3_LDR"><path d="M181.52,219 C193.17,219 198.81,219 210.46,219" fill="none" id="Tx3-to-LDR" style="stroke:#FF0000;stroke-width:1;"></path><polygon fill="#FF0000" points="216.46,219,207.46,215,211.46,219,207.46,223,216.46,219" style="stroke:#FF0000;stroke-width:1;"></polygon></g><!--link LDR to State1--><g class="link" data-entity-1="LDR" data-entity-2="State1" data-source-line="42" data-uid="lnk19" id="link_LDR_State1"><path d="M430.85,219 C442.32,219 447.79,219 459.26,219" fill="none" id="LDR-to-State1" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="465.26,219,456.26,215,460.26,219,456.26,223,465.26,219" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link State1 to Tx1aft--><g class="link" data-entity-1="State1" data-entity-2="Tx1aft" data-source-line="43" data-uid="lnk20" id="link_State1_Tx1aft"><path d="M545.62,219 C557.2,219 562.79,219 574.38,219" fill="none" id="State1-to-Tx1aft" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="580.38,219,571.38,215,575.38,219,571.38,223,580.38,219" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx1aft to Tx2aft--><g class="link" data-entity-1="Tx1aft" data-entity-2="Tx2aft" data-source-line="44" data-uid="lnk21" id="link_Tx1aft_Tx2aft"><path d="M690.72,219 C702.3,219 707.87,219 719.44,219" fill="none" id="Tx1aft-to-Tx2aft" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="725.44,219,716.44,215,720.44,219,716.44,223,725.44,219" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx2aft to Tx3aft--><g class="link" data-entity-1="Tx2aft" data-entity-2="Tx3aft" data-source-line="45" data-uid="lnk22" id="link_Tx2aft_Tx3aft"><path d="M835.72,219 C847.3,219 852.87,219 864.44,219" fill="none" id="Tx2aft-to-Tx3aft" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="870.44,219,861.44,215,865.44,219,861.44,223,870.44,219" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx1aft to veri1--><g class="link" data-entity-1="Tx1aft" data-entity-2="veri1" data-source-line="47" data-uid="lnk23" id="link_Tx1aft_veri1"><path d="M653.98,236.12 C678.52,257.52 717.3683,291.4161 744.2883,314.8961" fill="none" id="Tx1aft-to-veri1" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="748.81,318.84,744.6567,309.9097,745.0419,315.5534,739.3982,315.9386,748.81,318.84" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx2aft to veri1--><g class="link" data-entity-1="Tx2aft" data-entity-2="veri1" data-source-line="48" data-uid="lnk24" id="link_Tx2aft_veri1"><path d="M779.42,236.12 C777.99,257.52 775.8628,289.3735 774.2828,312.8535" fill="none" id="Tx2aft-to-veri1" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="773.88,318.84,778.4752,310.1289,774.2157,313.8513,770.4933,309.5917,773.88,318.84" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx3aft to veri1--><g class="link" data-entity-1="Tx3aft" data-entity-2="veri1" data-source-line="49" data-uid="lnk25" id="link_Tx3aft_veri1"><path d="M904.87,236.12 C877.46,257.52 833.7491,291.6673 803.6791,315.1473" fill="none" id="Tx3aft-to-veri1" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="798.95,318.84,808.5054,316.4537,802.8909,315.7628,803.5818,310.1483,798.95,318.84" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx1aft to veri2--><g class="link" data-entity-1="Tx1aft" data-entity-2="veri2" data-source-line="50" data-uid="lnk26" id="link_Tx1aft_veri2"><path d="M636.44,236.12 C637.7,257.52 639.558,289.3703 640.938,312.8503" fill="none" id="Tx1aft-to-veri2" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="641.29,318.84,644.7551,309.6208,640.9966,313.8486,636.7688,310.0902,641.29,318.84" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx2aft to veri2--><g class="link" data-entity-1="Tx2aft" data-entity-2="veri2" data-source-line="51" data-uid="lnk27" id="link_Tx2aft_veri2"><path d="M761.89,236.12 C737.17,257.52 698.0161,291.4327 670.8961,314.9127" fill="none" id="Tx2aft-to-veri2" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="666.36,318.84,675.7824,315.9731,670.1401,315.5673,670.546,309.925,666.36,318.84" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link Tx3aft to veri2--><g class="link" data-entity-1="Tx3aft" data-entity-2="veri2" data-source-line="52" data-uid="lnk28" id="link_Tx3aft_veri2"><path d="M881.6,236.07 C838.79,252.05 772.06,277.74 715.5,303 C704.5,307.91 698.1286,310.9107 687.3486,316.2907" fill="none" id="Tx3aft-to-veri2" style="stroke:#FF7F50;stroke-width:1;"></path><polygon fill="#FF7F50" points="681.98,318.97,691.819,318.5301,686.4538,316.7373,688.2466,311.372,681.98,318.97" style="stroke:#FF7F50;stroke-width:1;"></polygon></g><!--link veri1 to State2--><g class="link" data-entity-1="veri1" data-entity-2="State2" data-source-line="54" data-uid="lnk29" id="link_veri1_State2"><path d="M732.2,362.09 C721.88,367.31 710.79,372.89 700.5,378 C655.86,400.15 609.797,422.4393 575.077,439.1393" fill="none" id="veri1-to-State2" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="569.67,441.74,579.5144,441.4436,574.1759,439.5727,576.0467,434.2342,569.67,441.74" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link veri2 to State3--><g class="link" data-entity-1="veri2" data-entity-2="State3" data-source-line="55" data-uid="lnk30" id="link_veri2_State3"><path d="M602.25,360.44 C554.69,382.81 481.4695,417.2665 433.9895,439.5965" fill="none" id="veri2-to-State3" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="428.56,442.15,438.4066,441.9394,433.0846,440.0221,435.0019,434.7001,428.56,442.15" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link State2 to LDR--><g class="link" data-entity-1="State2" data-entity-2="LDR" data-source-line="57" data-uid="lnk31" id="link_State2_LDR"><path d="M509.68,437.81 C468.8,389.98 379.7487,285.8007 342.8787,242.6707" fill="none" id="State2-to-LDR" style="stroke:#9932CC;stroke-width:1;"></path><polygon fill="#9932CC" points="338.98,238.11,341.7876,247.5502,342.2289,241.9106,347.8686,242.3519,338.98,238.11" style="stroke:#9932CC;stroke-width:1;"></polygon></g><!--link State3 to LDR--><g class="link" data-entity-1="State3" data-entity-2="LDR" data-source-line="58" data-uid="lnk32" id="link_State3_LDR"><path d="M382.25,437.81 C369.35,389.98 341.5821,287.0331 329.9521,243.9031" fill="none" id="State3-to-LDR" style="stroke:#9932CC;stroke-width:1;"></path><polygon fill="#9932CC" points="328.39,238.11,326.8711,247.841,329.6918,242.9376,334.5952,245.7582,328.39,238.11" style="stroke:#9932CC;stroke-width:1;"></polygon></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="311.917" x="330.1113" y="504.3184">図１： ネットワーク全体におけるトランザクションの流れ</text><!--SRC=[bPNFJzH05CVlyrTCwa5D-DbwN3SHY71ObGZn8Xw6TdQtsUuCcHqGCIIs3OgBQD0G5GwAHiGVWHWY4i3mnmmBuSI_uCoqMtUNXImzJ3hl-tclhszUNsqqnbrAe55PtZpPMpZPMu8Yd1TXAC9P4Mw8S4y46vMPjOE_RuJ_G_XbuI-8O4whtqIuAO8j2OZWZmY_ggs_VlZR5y4B0wHA_967qr1UG2rvF8bobBGnR7D4SXvkSn17ewY4uMCDg6k0CdUA4ewy6vwR8qLCEBJbWfb6flLg8-RK-DoK_90xXM6tcTXwa5tePtISEBtKemnoXaXf334PAc4oBi73UTSk45mgmQuwU-GrwiamYVqMOZcNr823o75Saeijqo3L6RqoA1LS8X-6Yf1GZbKkkJDoQI0fSp0xJG5m-JPrC4XA1urX9IDRdrst0L493azsmqiPDvVdFTxucQmPisOBh1MpLWjiaWFAyekaqHgUPDA0WxYfe971I9PkX5mPf0Em7nFC4AViglRBzDsDdGPTKW2r3ndYYECHqZLfMjUiA2bjKgL44vZ8cAtWviLmgmO7oLTWtCFCpRgOnSMSa5kL1ovIqfjtirbAci5c0fiDC02g9zhlvrt7mUH1UreL7AYphxTP4STKXQH1bujX9oARMAqcLdMJMAibxAKCUI3U9MgrII8rtjMePfrgDgXMZPeuE_GXaMfSiNhNvffrZdOgfdbEJFESc8a6eYTKjQXdG8JK6Iq0uePghrQt3x727MRB0mDnypIJW9eVS9HoJekGPlMfGfYIRI07g1eermrvJ4QwkqE4gtggRwbLZlHWLlYVXRzw_CG_s5yH_gAStdh2hwY_GB2huUrKfmgL1er1zViPQLE6_Id2joByBe9VscLVX2_LJVXS-Dlolt3yyMbbvzN1xZlXprUUxLJAosV5_FzQHjhgE2fl7SxCYU3rqQUTolgIyD-hxFmF8l3LtwQyUFHbhHf9Vb9wa4Bm3m00]--></g></svg></p><p>ネットワークが分断されていない状態（非分断状態）では、任意の時点においてネットワーク内には1つのリーダーが存在する。<br>
各ベリファイア（Verifier）ノードはリーダーと同じハードウェア能力を備えており、PoS（Proof of Stake）に基づく選挙によってリーダーに選出される可能性がある。<br>
この提案されたPoSアルゴリズムにおける選挙の仕組みは、第5.6節において詳しく解説する。</p>
<p>CAP定理の観点では、ネットワークが分断された場合には、一貫性（Consistency）が可用性（Availability）よりも優先されることがほとんどである。<br>
本稿では、大規模なネットワーク分断が発生した場合でも、いかなる規模のパーティションからでもネットワークの制御を回復するためのメカニズムを提案する。<br>
このメカニズムについては、第5.12節において詳しく解説する。</p>
<h2 id="4-proof-of-history">4 Proof of History </h2>
<p>Proof of History（PoH）とは、2つのイベント間における時間の経過を暗号学的に検証できる方法を提供する一連の計算処理である。
この仕組みは、入力から出力を予測できず出力を得るには関数全体を完全に実行しなければならないような暗号学的に安全な関数が使用される。</p>
<p>この関数は、1つのコア上で逐次的に実行され、前回の出力を次の入力として用いる。関数は定期的にその出力と、呼び出された回数（カウント）を記録する。</p>
<p>その出力は、外部のコンピュータが各シーケンスの断片を別々のコアで検証することで、並列的に再計算・検証が可能である。</p>
<p>このシーケンス内にデータをタイムスタンプとして組み込むには、そのデータ（またはデータのハッシュ）を関数の状態に付加することで実現される。</p>
<p>関数の状態・インデックス・追加されたデータを記録することで、そのデータが次のハッシュがシーケンス内で生成される以前のある時点で確かに存在していたことが保証される、タイムスタンプが得られる。</p>
<p>この設計は 水平方向のスケーリングもサポートしており、複数の PoH 生成器が互いの状態をそれぞれのシーケンスに混ぜ合わせることで同期することができる。
この 水平スケーリング については、第4.4節にて詳しく説明する。</p>
<h3 id="41-description">4.1 Description </h3>
<p>本システムは、次のような手順で動作するように設計されている。<br>
暗号学的ハッシュ関数（たとえば <code>sha256</code> や <code>ripemd</code> など）のうち、関数を実行しない限り出力を予測できない関数を用いて、あるランダムな初期値から関数を実行し、その出力を次の入力として再び同じ関数に渡す。</p>
<p>この関数が呼び出された回数と、各回の出力を記録していく。</p>
<p>最初に選ばれるランダムな値は、任意の文字列でかまわず、たとえばその日のニューヨーク・タイムズ紙の見出しといったものでも良い。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="105px" preserveAspectRatio="none" style="width:442px;height:104px;background:#FFFFFF;" version="1.1" viewBox="0 0 442 104" width="442.4px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="143.8828" x="8.4" y="23.182">例 : PoH シーケンス</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="68.2801" y="42.782">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="321.0812" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="59.582">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="238.8012" x="68.2801" y="59.582">sha256( 任意のランダム初期値 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="321.0812" y="59.582">hash1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="76.382">2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="127.173" x="68.2801" y="76.382">sha256( hash1 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="321.0812" y="76.382">hash2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="93.182">3</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="127.173" x="68.2801" y="93.182">sha256( hash2 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="321.0812" y="93.182">hash3</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="95.2" y2="95.2"></line><!--SRC=[RP1FIm916CRlyodUenuqdKsHHKJAoZQb9Vzq7jr9DzPPcPcLmWHpEmGT-W957Rfq2Q93XD6N6VLpD6j45irjVk_pFBpFMnIIS2c89v5e4uz2EhcEXhEFAp31zikW9gygV5UJPnM-gCaR6jOJADygx3A7dkJNMWKu0_tTxrDEfEkp5HJ8VY2XJ4GtWYYjiUWIdCd6O3QTBYwkrVcJ2X-Zt72imllvvUtYvcu-Ve2ubdQrButmYcb9zEpN-n9YPFmHul-51XgDK94oPraOsHvXib6jm81oeRVNvN4APv8uTaWTi0Y3L0vIs3Goff45grQ7Q1n7iHsx0i8FU9k2umh9tLOGjOyZYmm870HCkZrgWZuBiqfxtm2ssC3bFkjH9f7LhFu8ikk93LT2ZNAz2JIhg4IFIE19xMZxZiiw9ZJgsuaSgX3M2KX7PnyJjEdhN7vgWcL_0W00]--></g></svg></p><p>ここで、hashN は実際のハッシュ出力を表す。<br>
hash1、hash2、hash3 …</p>
<p>すべてのハッシュとインデックスを逐一公開する必要はなく、一定の間隔でその一部を公開するだけで十分である。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="105px" preserveAspectRatio="none" style="width:442px;height:104px;background:#FFFFFF;" version="1.1" viewBox="0 0 442 104" width="442.4px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="243.3293" x="8.4" y="23.182">例 : PoH シーケンス（間引き公開）</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="68.2801" y="42.782">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="321.0812" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="59.582">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="238.8012" x="68.2801" y="59.582">sha256( 任意のランダム初期値 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="321.0812" y="59.582">hash1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="76.382">200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="76.382">sha256( hash199 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="321.0812" y="76.382">hash200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="93.182">300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="93.182">sha256( hash299 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="321.0812" y="93.182">hash300</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="433.4094" y1="95.2" y2="95.2"></line><!--SRC=[TP1DIm9H58RtzrUSfIwqSVn01n4fAvkK93zQNvsRJkWTcRaZXGdg51WIBI9NHItQ1154YmYbFtDLSELVw6f4GdHsvptFUywzRznYs6GMhZ9abN2LWCyRGCtnPnyKo1X9uDrtxenuzvKxRxpxCH_rPeFhoUY6Toudvy-pGNy-ka3Dd0T5Yx4Tgf7Zw5en1gSWshqwCJ7J3ReYsQnkCqXYgx8GaGz03AmAbeCX5uo7m-dP5U-ySETfSSvfS-TXqhkRtjvFse_WNi8LuVKXMP9MZ4ij4baIA_KD2nJv_-3oVxX0KQk5ueHgorHGfeefowTJq22c9NuZ4f8bEUYLNGT40nLJaC8WoOe_gFX3e6Ppi1YxaMixamBBiCqI0KstcAaNxKKQRgJY1ePzcpAzHXGGCL4riViZm2PjwAP1QuGof1RIlq0eu5dN6MI9ALu2XJHAa4DiLvbmb0nDfsK5yhajJnYbC2tRk2ns7s6qOOYzvea2QkOB]--></g></svg></p><p>使用するハッシュ関数が 衝突耐性（collision resistant）を持っている限り、このハッシュの集合は、単一のコンピュータスレッドによって順番にしか計算できない。</p>
<p>これは、初期値からアルゴリズムを300回実行しなければ、インデックス<code>300</code>におけるハッシュ値を予測する方法が存在しないという事実に基づいている。</p>
<p>したがって、インデックス<code>0</code>からインデックス<code>300</code>の間にリアルタイム（実時間）が経過していることを、このデータ構造から推測することができる。</p>
<p>図2の例では、</p>
<ul>
<li>ハッシュ <code>62f51643c1</code> はカウント <code>510144806912</code> で生成され、</li>
<li>ハッシュ <code>c43d862d88</code> はカウント <code>510146904064</code> で生成された。</li>
</ul>
<p>先に述べた PoH アルゴリズムの性質に従えば、カウント<code>510144806912</code>から<code>510146904064</code>の間には、
確かにリアルタイムの経過があったと信頼できる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="300px" preserveAspectRatio="none" style="width:282px;height:300px;background:#FFFFFF;" version="1.1" viewBox="0 0 282 300" width="282px" zoomAndPan="magnify"><defs></defs><g><!--entity H1--><g class="entity" data-entity="H1" data-source-line="3" data-uid="ent0002" id="entity_H1"><polygon fill="#ADD8E6" points="71,31,57.25,12,29.75,12,16,31,29.75,50,57.25,50,71,31" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="29.8052" y="29.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="29.8052" y="43.3184">256</text></g><!--entity H2--><g class="entity" data-entity="H2" data-source-line="4" data-uid="ent0003" id="entity_H2"><polygon fill="#ADD8E6" points="71,139,57.25,120,29.75,120,16,139,29.75,158,57.25,158,71,139" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="29.8052" y="137.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="29.8052" y="151.3184">256</text></g><!--entity H3--><g class="entity" data-entity="H3" data-source-line="5" data-uid="ent0004" id="entity_H3"><polygon fill="#ADD8E6" points="71,247,57.25,228,29.75,228,16,247,29.75,266,57.25,266,71,247" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="29.8052" y="245.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="29.8052" y="259.3184">256</text></g><!--entity out1--><g class="entity" data-entity="out1" data-source-line="7" data-uid="ent0005" id="entity_out1"><rect fill="#F5FFFA" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="106.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="116.5" y="29.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.4482" x="153.1885" y="29.3184">62f51643c1</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="116.5" y="43.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="160.2979" y="43.3184">510144806912</text></g><!--entity out2--><g class="entity" data-entity="out2" data-source-line="11" data-uid="ent0006" id="entity_out2"><rect fill="#F5FFFA" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="106.5" y="115"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="116.5" y="137.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.8604" x="153.1885" y="137.3184">3d039ef62e</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="116.5" y="151.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="160.2979" y="151.3184">510145855488</text></g><!--entity out3--><g class="entity" data-entity="out3" data-source-line="15" data-uid="ent0007" id="entity_out3"><rect fill="#F5FFFA" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="106.5" y="223"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="116.5" y="245.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.8164" x="153.1885" y="245.3184">c43d862d88</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="116.5" y="259.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="160.2979" y="259.3184">510146904064</text></g><!--link H1 to H2--><g class="link" data-entity-1="H1" data-entity-2="H2" data-source-line="19" data-uid="lnk8" id="link_H1_H2"><path d="M43.5,50.46 C43.5,69.92 43.5,94.37 43.5,113.75" fill="none" id="H1-to-H2" style="stroke:#000080;stroke-width:4;"></path><polygon fill="#000080" points="43.5,119.75,47.5,110.75,43.5,114.75,39.5,110.75,43.5,119.75" style="stroke:#000080;stroke-width:4;"></polygon></g><!--link H2 to H3--><g class="link" data-entity-1="H2" data-entity-2="H3" data-source-line="20" data-uid="lnk9" id="link_H2_H3"><path d="M43.5,158.46 C43.5,177.92 43.5,202.37 43.5,221.75" fill="none" id="H2-to-H3" style="stroke:#000080;stroke-width:4;"></path><polygon fill="#000080" points="43.5,227.75,47.5,218.75,43.5,222.75,39.5,218.75,43.5,227.75" style="stroke:#000080;stroke-width:4;"></polygon></g><!--link H1 to out1--><g class="link" data-entity-1="H1" data-entity-2="out1" data-source-line="22" data-uid="lnk10" id="link_H1_out1"><path d="M71.25,31 C82.99,31 88.74,31 100.48,31" fill="none" id="H1-to-out1" style="stroke:#5F9EA0;stroke-width:4;"></path><polygon fill="#5F9EA0" points="106.48,31,97.48,27,101.48,31,97.48,35,106.48,31" style="stroke:#5F9EA0;stroke-width:4;"></polygon></g><!--link H2 to out2--><g class="link" data-entity-1="H2" data-entity-2="out2" data-source-line="23" data-uid="lnk11" id="link_H2_out2"><path d="M71.25,139 C82.99,139 88.74,139 100.48,139" fill="none" id="H2-to-out2" style="stroke:#5F9EA0;stroke-width:4;"></path><polygon fill="#5F9EA0" points="106.48,139,97.48,135,101.48,139,97.48,143,106.48,139" style="stroke:#5F9EA0;stroke-width:4;"></polygon></g><!--link H3 to out3--><g class="link" data-entity-1="H3" data-entity-2="out3" data-source-line="24" data-uid="lnk12" id="link_H3_out3"><path d="M71.25,247 C82.99,247 88.74,247 100.48,247" fill="none" id="H3-to-out3" style="stroke:#5F9EA0;stroke-width:4;"></path><polygon fill="#5F9EA0" points="106.48,247,97.48,243,101.48,247,97.48,251,106.48,247" style="stroke:#5F9EA0;stroke-width:4;"></polygon></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.8867" x="70.1157" y="289.3184">図２： PoH シーケンス</text><!--SRC=[ZT3FIiCm0CVnUvyYr8EdOVEN56P1T-b1X-3HUSYQh2tEHDhKFzVj3JpgKyWE8lHjoivx1TlEmIOjx1QI3r_2Bn9FDZKQkElFrQPytvGVuCQ4e5fyLykoMdnLorMr-76Tqx6HoadKguWRVHjUJ3IYp0KY1o449rTfdDZBUT5hq146xnidKv4LEfuhu0wdGIBoP7Ws3G13CmePmH6SwFe-CeMsxGE57YI4Uyo7gEsPmjO_kqwr7MLAFFOMiVImhsOCgQuYvPGIpdT5T4mn8bXoXYJdNKNcUyHZP5V41yLwp84qB_hE9cdqe5MUdvFxGT0EE1RFRqvzw0Ru3xI9hDdnFzaECX9IRITkKdqG7K3S3_4-_0K0]--></g></svg></p><h3 id="42-timestamp-for-events">4.2 Timestamp for Events </h3>
<p>このハッシュの連鎖列は、あるデータが特定のハッシュインデックスが生成される以前に作成されたことを記録するためにも使用できる。</p>
<p>その方法としては、「結合関数（combine function）」を使って、データを現在のインデックスにおけるハッシュと組み合わせる。
このデータとは、任意のイベントデータから得られる 暗号学的に一意なハッシュ であればよい。</p>
<p>結合関数は、単純にデータを付加（append）する処理でもよいし、衝突耐性のある任意の操作でもよい。</p>
<p>その後に生成されるハッシュは、そのデータに対するタイムスタンプを表している。
なぜなら、そのハッシュは、その特定のデータが挿入された後にしか生成され得ないからである。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="105px" preserveAspectRatio="none" style="width:485px;height:104px;background:#FFFFFF;" version="1.1" viewBox="0 0 485 104" width="485.8px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="143.8828" x="8.4" y="23.182">例 : PoH シーケンス</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="68.2801" y="42.782">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="364.1066" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="59.582">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="281.8266" x="68.2801" y="59.582">sha256( any random starting value )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="364.1066" y="59.582">hash1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="76.382">200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="76.382">sha256( hash199 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="364.1066" y="76.382">hash200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="93.182">300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="93.182">sha256( hash299 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="364.1066" y="93.182">hash300</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="476.4348" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="476.4348" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="476.4348" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="476.4348" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="476.4348" y1="95.2" y2="95.2"></line><!--SRC=[XP3BJi9G48RtynIpX0LOoYNG448K5IkDZLnS3_G8DUMKd4iZ0JQmz6cC2sDYV9dw89v2Z1fDdDtyyt-JcRyj5GabAL8W9nGnB1Khi7f_Uq07_RYBwVOvtRscsyTqzvHkNs0rA41ptBhW0Rjl7erRk4RJNYsO81N6_9karK8hx9ASPIAKCAiroXdPrLeEYIzH40_YEUvF2FaK4ueqm_p1E3Da2MpB-e7jrKRZOFfT1yn0KFu3jFy33GIR3RGP3_QHW1yHLqElXmaJqlnduh4jkrgqSpSiG9SuMdMqRATSTSerTFi3pCPvo9txFPIn5XE6GIYL2CSwooSFBYM4rvghSCuSDC5njtFvAU0fJq8HypdZ2joHzsMeLGh7eS8-4-OI77dGORUa8sM8IHoOy1mS3iuATUWHdsgQcjrt12UnsIkM3hh-1m00]--></g></svg></p><p>何らかの外部イベントが発生する。たとえば、写真が撮影されたり、任意のデジタルデータが作成されたりする。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="121.8px" preserveAspectRatio="none" style="width:545px;height:121px;background:#FFFFFF;" version="1.1" viewBox="0 0 545 121" width="546px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="286.7812" x="8.4" y="23.182">例 : PoH シーケンス (データ情報を付随)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="68.2801" y="42.782">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="423.8746" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="59.582">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="281.8266" x="68.2801" y="59.582">sha256( any random starting value )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="423.8746" y="59.582">hash1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="76.382">200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="76.382">sha256( hash199 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="423.8746" y="76.382">hash200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="93.182">300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="93.182">sha256( hash299 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="423.8746" y="93.182">hash300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="109.982">336</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="341.5945" x="68.2801" y="109.982">sha256( append( hash335, sha256(写真) ) )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="423.8746" y="109.982">hash336</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.2027" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.2027" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.2027" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.2027" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.2027" y1="95.2" y2="95.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.2027" y1="112" y2="112"></line><!--SRC=[bP71Ji9048Rl-nHpf8beQOLeGmXHLAmGYQ2U1xf2JTcIxPP8W4k9Ul1WuacDYRu2yM2CHX-ceF4jtA96JV3WtFQV_R-PtJ_h2UJ2GqSGhuOEXSJiFEcEdax0W9ARXp2u2mUFOJ0C1xTXS0-nS70y4PvV1eVZcs4Od8qUpjykJnNIhSH9kffPPnOzICzLCz03UTniKOx2TjaFoHSjNq0UlKOaaWH4rGElWLeo5GDa7U38BBS9a-riLeSsEZu51QPK3ngIb22Qglx2JDJ5nUcclp0IGlGf8Es_83q2wQdV3skrABC-WBgUdFbgZ8ykNg-k5L1-ZFYaw2dIxvEij4qo8YK7cTWk5g1DkIT_LUQbgLfoLeljKWjCPA0kWAePUjAGmyro1QAsGc9hfG9uhizh52pR4zok-b4g2Z6nZR3bCs4tgG4oBcRcDhu4M65jcxkiIPaWvaxn-q9gFhva2oXJBZU1dIB9qJtq7I4TDTUIaHcmNLcDBv02ihgFTSdUHxBiIYxl662MtW40]--></g></svg></p><p><code>hash336</code> は、<code>hash335</code> と写真の <code>sha256</code> を結合したバイナリデータから計算される。<br>
インデックスと写真の <code>sha256</code> は、シーケンス出力の一部として記録される。<br>
したがって、このシーケンスを検証する任意の者は、この変更をシーケンス上で再現することができる。<br>
検証は依然として並列で行うことができ、この点は第4.3節で議論する。<br>
初期の処理が依然として逐次的であるため、シーケンスに挿入された内容は、将来のハッシュ値が計算される前のある時点で発生していたことがわかる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="214.2px" preserveAspectRatio="none" style="width:552px;height:214px;background:#FFFFFF;" version="1.1" viewBox="0 0 552 214" width="553px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="112.6371" x="8.4" y="23.182">PoH シーケンス</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="68.2801" y="42.782">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="431.6676" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="8.4" y="59.582">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="281.8266" x="68.2801" y="59.582">sha256( any random starting value )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="47.9719" x="431.6676" y="59.582">hash1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="76.382">200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="76.382">sha256( hash199 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="76.382">hash200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="93.182">300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="93.182">sha256( hash299 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="93.182">hash300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="109.982">336</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="349.3875" x="68.2801" y="109.982">sha256( append( hash335, 写真1_sha256 ) )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="109.982">hash336</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="126.782">400</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="126.782">sha256( hash399 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="126.782">hash400</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="143.582">500</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="143.582">sha256( hash499 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="143.582">hash500</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="160.382">600</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="349.3875" x="68.2801" y="160.382">sha256( append( hash599, 写真2_sha256 ) )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="160.382">hash600</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="8.4" y="177.182">700</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="148.3371" x="68.2801" y="177.182">sha256( hash699 )</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="431.6676" y="177.182">hash700</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="95.2" y2="95.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="112" y2="112"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="128.8" y2="128.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="145.6" y2="145.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="162.4" y2="162.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="543.9957" y1="179.2" y2="179.2"></line><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="350.1299" x="98.3329" y="199.2457">表1: 2つのイベントを含む PoH シーケンス</text><!--SRC=[ZPBVQXD15CRlprCSUfM0YVidkpPBAKLRhMj2WqthfPnansJBPdQPdGsMfc0tKBmKxmg22BqGX4BnGWJVPYZw6Cuc5jEuGixTd3tVRxwpyssbaeHCAPAGzYbYQDORSDA9Tr7btzJqXyglrVIhoh_3IRS66xtDfpnWhpVkzpPnWlgubp11CepvGYkJIIPnbz9XqGGJYvfWEYJBSIj8_1W5yI0UuUpoa0zmJ576i8gBDS6XHfXW6SOT_QpRR2vD_rjplLQ3NKAmLYRO1S5sx-wG98m7Sv9jE_VmvlpYvuUFvilvW2PNbo2s2uqI6_OADluWj1oS4aHZTOIMWxk4M5p5QJPlLx7-kue6m8CI7-xAVrIhuVGK-fGKoS6rNvy-cnvQwknIdLsf_59DBuhGJT-g_FtDkoygVuCbYLo3BMry5bteHCJbGRk5OoRIWcdMBSDowbRb1GlG9ux6EXgMPpkUVab_lul5vofKddHQcCQPw3CCmbIAi9SLdghWqvZmUSPbE68UwfXpV_lPRGDt-3WKCHynBi4_RFyTS1krXw74VIQq4pnimpPxHLaajQ8V1phg7Xvq7zVMeKLyaD50iuy87iMQAuuzz3k_0G00]--></g></svg></p><p>表1で表されるシーケンスにおいて、<code>写真2</code> は <code>hash600</code> より前に作成され、<code>写真1</code> は <code>hash336</code> より前に作成された。<br>
データをハッシュ列に挿入すると、その後のすべての値が変更される。<br>
使用されているハッシュ関数が衝突耐性を持ち、かつデータが追加されたものである限り、
どのデータがシーケンスに統合されるかという事前の知識に基づいて、将来のシーケンスをあらかじめ計算することは計算上不可能であるべきである。</p>
<p>シーケンスに混入されるデータは、生のデータそのものでもよいし、データのハッシュとそれに付随するメタデータでもよい。
<strong>図3</strong> の例では、入力 <code>cfd40df8...</code> が Proof of History のシーケンスに挿入された。<br>
それが挿入されたカウントは <code>510145855488</code> であり、そのときの状態は <code>3d039eef3</code> である。<br>
この変更により、その後に生成されるすべてのハッシュが変更され、この変更は図中の色の変化で示されている。<br>
このシーケンスを観測しているすべてのノードは、すべてのイベントが挿入された順序を判断でき、
それぞれの挿入の間にどれだけの実時間が経過したかを推定することができる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="314px" preserveAspectRatio="none" style="width:439px;height:314px;background:#FFFFFF;" version="1.1" viewBox="0 0 439 314" width="439px" zoomAndPan="magnify"><defs></defs><g><!--entity I1--><g class="entity" data-entity="I1" data-source-line="3" data-uid="ent0002" id="entity_I1"><rect fill="#FFB6C1" height="20" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.4121" x="7" y="136"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="36.4219" x="17" y="151.3184">input</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.21" x="57.2021" y="151.3184">cfd40df8...</text></g><!--entity H1--><g class="entity" data-entity="H1" data-source-line="5" data-uid="ent0003" id="entity_H1"><polygon fill="#ADD8E6" points="228,31,214.25,12,186.75,12,173,31,186.75,50,214.25,50,228,31" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="186.8052" y="29.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="186.8052" y="43.3184">256</text></g><!--entity H2--><g class="entity" data-entity="H2" data-source-line="6" data-uid="ent0004" id="entity_H2"><polygon fill="#FFB6C1" points="228,146,214.25,127,186.75,127,173,146,186.75,165,214.25,165,228,146" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="186.8052" y="144.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="186.8052" y="158.3184">256</text></g><!--entity H3--><g class="entity" data-entity="H3" data-source-line="7" data-uid="ent0005" id="entity_H3"><polygon fill="#FFB6C1" points="228,261,214.25,242,186.75,242,173,261,186.75,280,214.25,280,228,261" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="186.8052" y="259.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="186.8052" y="273.3184">256</text></g><!--entity out1--><g class="entity" data-entity="out1" data-source-line="9" data-uid="ent0006" id="entity_out1"><rect fill="#ADD8E6" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="263.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="273.5" y="29.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.543" x="310.1885" y="29.3184">62f51643c1...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="273.5" y="43.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="317.2979" y="43.3184">510144806912</text></g><!--entity out2--><g class="entity" data-entity="out2" data-source-line="13" data-uid="ent0007" id="entity_out2"><rect fill="#FFB6C1" height="62" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="263.5" y="115"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="273.5" y="137.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.1367" x="310.1885" y="137.3184">3d039eef3...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="273.5" y="151.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="317.2979" y="151.3184">510145855488</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="36.4219" x="273.5" y="165.3184">input</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.21" x="313.7021" y="165.3184">cfd40df8...</text></g><!--entity out3--><g class="entity" data-entity="out3" data-source-line="18" data-uid="ent0008" id="entity_out3"><rect fill="#FFB6C1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="263.5" y="237"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="273.5" y="259.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.4395" x="310.1885" y="259.3184">79a5df1dc...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="273.5" y="273.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="317.2979" y="273.3184">510146904064</text></g><!--link I1 to H2--><g class="link" data-entity-1="I1" data-entity-2="H2" data-source-line="22" data-uid="lnk9" id="link_I1_H2"><path d="M138.5,146 C149.96,146 155.43,146 166.89,146" fill="none" id="I1-to-H2" style="stroke:#FFB6C1;stroke-width:4;"></path><polygon fill="#FFB6C1" points="172.89,146,163.89,142,167.89,146,163.89,150,172.89,146" style="stroke:#FFB6C1;stroke-width:4;"></polygon></g><!--link H1 to H2--><g class="link" data-entity-1="H1" data-entity-2="H2" data-source-line="23" data-uid="lnk10" id="link_H1_H2"><path d="M200.5,50.16 C200.5,71.24 200.5,99.82 200.5,120.89" fill="none" id="H1-to-H2" style="stroke:#ADD8E6;stroke-width:4;"></path><polygon fill="#ADD8E6" points="200.5,126.89,204.5,117.89,200.5,121.89,196.5,117.89,200.5,126.89" style="stroke:#ADD8E6;stroke-width:4;"></polygon></g><!--link H2 to H3--><g class="link" data-entity-1="H2" data-entity-2="H3" data-source-line="24" data-uid="lnk11" id="link_H2_H3"><path d="M200.5,165.16 C200.5,186.24 200.5,214.82 200.5,235.89" fill="none" id="H2-to-H3" style="stroke:#FFB6C1;stroke-width:4;"></path><polygon fill="#FFB6C1" points="200.5,241.89,204.5,232.89,200.5,236.89,196.5,232.89,200.5,241.89" style="stroke:#FFB6C1;stroke-width:4;"></polygon></g><!--link H1 to out1--><g class="link" data-entity-1="H1" data-entity-2="out1" data-source-line="26" data-uid="lnk12" id="link_H1_out1"><path d="M228.25,31 C239.99,31 245.74,31 257.48,31" fill="none" id="H1-to-out1" style="stroke:#ADD8E6;stroke-width:4;"></path><polygon fill="#ADD8E6" points="263.48,31,254.48,27,258.48,31,254.48,35,263.48,31" style="stroke:#ADD8E6;stroke-width:4;"></polygon></g><!--link H2 to out2--><g class="link" data-entity-1="H2" data-entity-2="out2" data-source-line="27" data-uid="lnk13" id="link_H2_out2"><path d="M228.25,146 C239.99,146 245.74,146 257.48,146" fill="none" id="H2-to-out2" style="stroke:#FFB6C1;stroke-width:4;"></path><polygon fill="#FFB6C1" points="263.48,146,254.48,142,258.48,146,254.48,150,263.48,146" style="stroke:#FFB6C1;stroke-width:4;"></polygon></g><!--link H3 to out3--><g class="link" data-entity-1="H3" data-entity-2="out3" data-source-line="28" data-uid="lnk14" id="link_H3_out3"><path d="M228.25,261 C239.99,261 245.74,261 257.48,261" fill="none" id="H3-to-out3" style="stroke:#FFB6C1;stroke-width:4;"></path><polygon fill="#FFB6C1" points="263.48,261,254.48,257,258.48,261,254.48,265,263.48,261" style="stroke:#FFB6C1;stroke-width:4;"></polygon></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="258.0703" x="83.5239" y="303.3184">図３： Inserting data into Proof of History</text><!--SRC=[ZP6zQiCm58LtFuLmXqvsBLjIRKWDxUH0AO6EJGP5FxP8a88jq_OvkhMFqJMlqpclKCKbK8KA2bekz-ESetCPtLbbD8Y_FZuF-xV3_XtCzI1wgtGBEBKKA6qDMFJ6IE1UemPh-jSukdmmN4ICzXp4itMjz6wqiwjr3PZaAEEoJDCq1dG0SmWkxbNRsONIcoZgn0jjZuQFpUrIvvXCK7E2xhQZ237vRw40KtXclM2MwdOhfemT7Ref8iabXWGL3BgGI-rMp8pw9pw66KIep4W5yqdIZDOB5n8jU5PKGiWYe8bBZ55PJgjmMyuj_yyNhYkAkOIS1Tn8bQ6Ce9EcNuixIT8VnoVRARRHOXXkq2gfpofsHqcuUTP1Qkh3JNzJlcSJyZplzwWN0lruHHZqlBy1]--></g></svg></p><h3 id="43-verification">4.3 Verification </h3>
<p>このシーケンスは、マルチコアコンピュータによって、生成にかかった時間よりも大幅に短い時間で正しく検証されることができる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="165.2px" preserveAspectRatio="none" style="width:422px;height:165px;background:#FFFFFF;" version="1.1" viewBox="0 0 422 165" width="422.8px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="9.8" y="24.582">例</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="40.2035" x="9.8" y="44.182">Core</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="77.0219" y="44.182">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="136.902" y="44.182">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="290.1664" y="44.182">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="53.2219" x="9.8" y="60.982">Core 1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="77.0219" y="60.982">200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="139.2645" x="136.902" y="60.982">sha256(hash199)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="290.1664" y="60.982">hash200</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="9.8" y="77.782">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="77.0219" y="77.782">300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="139.2645" x="136.902" y="77.782">sha256(hash299)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="290.1664" y="77.782">hash300</text><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="29.4" y2="29.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="46.2" y2="46.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="63" y2="63"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="79.8" y2="79.8"></line><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="4.5363" x="402.4945" y="23.182">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="4.5363" x="409.8309" y="23.182">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="9.8" y="100.182">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="40.2035" x="9.8" y="119.782">Core</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="77.0219" y="119.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="84.2051" x="136.902" y="119.782">Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="290.1664" y="119.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="53.2219" x="9.8" y="136.582">Core 2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="77.0219" y="136.582">300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="139.2645" x="136.902" y="136.582">sha256(hash299)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="290.1664" y="136.582">hash300</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="9.8" y="153.382">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="31.7461" x="77.0219" y="153.382">400</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="139.2645" x="136.902" y="153.382">sha256(hash399)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.1359" x="290.1664" y="153.382">hash400</text><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="105" y2="105"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="121.8" y2="121.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="138.6" y2="138.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="402.4945" y1="155.4" y2="155.4"></line><!--SRC=[hL7BJi905DtVhxXBM83jj11e2262hmgHoCFrG4SOKwPa7aHjITZxJ_wCVeZJ6eJ8oiIxcJddtdDoJsv7QIgreh46DQSnGxVgGmhfv_iRfECAPArPkvj8rZgRjJ53Ysv4n9uFy6xD9DKy4KUKqMkZyPggPKv2bXkWYz-L8N6SubLBIchrqjBEkSrckU1oOFkGVUns-5CPUgSQSgonVTXkMug_ii1jP_iFfDRdduEGFotrEuX_gl6EDNuHP0iT9gBYB32CgT2JGHytJ2gxdpqHSKYjIaeFBCAG2dGQw930gmLU7SFH6FDs6KfNmpwgnCWvmuWhBVdCvFdA4D8DnNiZD5-n06rm4VPkzmHUY0sNYLWneI6S3Wu3TRzopZMEcBIRu7G0FVP8JQojOfv4N2m2d8mlAmteKx4mT66zdoXq4-ihNm8CXry0]--></g></svg></p><p>一定数のコアが与えられている場合、たとえば 4000 コアを持つ現代の GPU のような場合、<br>
検証者（verifier）は、ハッシュ列とそのインデックスを 4000 のスライスに分割し、<br>
それぞれのスライスが開始ハッシュからそのスライス内の最後のハッシュまで正しいことを<br>
並列に確認することができる。</p>
<p>このとき、シーケンスの生成に要する想定時間は次のようになる：</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="197px" preserveAspectRatio="none" style="width:592px;height:197px;background:#FFFFFF;" version="1.1" viewBox="0 0 592 197" width="592px" zoomAndPan="magnify"><defs></defs><g><!--entity V1--><g class="entity" data-entity="V1" data-source-line="3" data-uid="ent0002" id="entity_V1"><polygon fill="#ADD8E6" points="279,148,255.5,129,208.5,129,185,148,208.5,167,255.5,167,279,148" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0586" x="208.5293" y="146.3184">Verifier</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.8154" x="208.5293" y="160.3184">core 1</text></g><!--entity V2--><g class="entity" data-entity="V2" data-source-line="4" data-uid="ent0003" id="entity_V2"><polygon fill="#FFB6C1" points="408,148,384.5,129,337.5,129,314,148,337.5,167,384.5,167,408,148" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0586" x="337.5293" y="146.3184">Verifier</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.8154" x="337.5293" y="160.3184">core 2</text></g><!--entity Tx1--><g class="entity" data-entity="Tx1" data-source-line="6" data-uid="ent0004" id="entity_Tx1"><rect fill="#ADD8E6" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="7" y="14"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="17" y="36.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.7246" x="53.6885" y="36.3184">62f5164c1...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="17" y="50.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="60.7979" y="50.3184">510144806912</text></g><!--entity Tx2--><g class="entity" data-entity="Tx2" data-source-line="10" data-uid="ent0005" id="entity_Tx2"><rect fill="#FFB6C1" height="62" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="212" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="222" y="29.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.1367" x="258.6885" y="29.3184">3d039eef6...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="222" y="43.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="265.7979" y="43.3184">510145855488</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="36.4219" x="222" y="57.3184">input</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.0977" x="262.2021" y="57.3184">cfd40zf8...</text></g><!--entity Tx3--><g class="entity" data-entity="Tx3" data-source-line="15" data-uid="ent0006" id="entity_Tx3"><rect fill="#FFB6C1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="417" y="14"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="427" y="36.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.8115" x="463.6885" y="36.3184">79a5aa1dc...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="427" y="50.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="470.7979" y="50.3184">510146904064</text></g><!--link Tx1 to V1--><g class="link" data-entity-1="Tx1" data-entity-2="V1" data-source-line="19" data-uid="lnk7" id="link_Tx1_V1"><path d="M122.03,62.17 C147.9,82.13 179.9796,106.8648 203.7496,125.2048" fill="none" id="Tx1-to-V1" style="stroke:#ADD8E6;stroke-width:4;"></path><polygon fill="#ADD8E6" points="208.5,128.87,203.8179,120.2053,204.5413,125.8157,198.9309,126.5391,208.5,128.87" style="stroke:#ADD8E6;stroke-width:4;"></polygon></g><!--link Tx2 to V1--><g class="link" data-entity-1="Tx2" data-entity-2="V1" data-source-line="20" data-uid="lnk8" id="link_Tx2_V1"><path d="M278.89,69.08 C267.32,88.31 255.7939,107.4592 245.9839,123.7592" fill="none" id="Tx2-to-V1" style="stroke:#ADD8E6;stroke-width:4;"></path><polygon fill="#ADD8E6" points="242.89,128.9,250.9581,123.2515,245.4683,124.616,244.1037,119.1262,242.89,128.9" style="stroke:#ADD8E6;stroke-width:4;"></polygon></g><!--link Tx2 to V2--><g class="link" data-entity-1="Tx2" data-entity-2="V2" data-source-line="21" data-uid="lnk9" id="link_Tx2_V2"><path d="M314.83,69.08 C326.22,88.31 337.5487,107.4397 347.2187,123.7397" fill="none" id="Tx2-to-V2" style="stroke:#FFB6C1;stroke-width:4;"></path><polygon fill="#FFB6C1" points="350.28,128.9,349.1282,119.1187,347.7289,124.5998,342.2478,123.2005,350.28,128.9" style="stroke:#FFB6C1;stroke-width:4;"></polygon></g><!--link Tx3 to V2--><g class="link" data-entity-1="Tx3" data-entity-2="V2" data-source-line="22" data-uid="lnk10" id="link_Tx3_V2"><path d="M471.75,62.17 C445.7,82.13 413.373,106.8812 389.433,125.2212" fill="none" id="Tx3-to-V2" style="stroke:#FFB6C1;stroke-width:4;"></path><polygon fill="#FFB6C1" points="384.67,128.87,394.247,126.5721,388.6392,125.8293,389.3819,120.2214,384.67,128.87" style="stroke:#FFB6C1;stroke-width:4;"></polygon></g><!--link V1 to V2--><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="244.5215" x="167.0483" y="186.3184">図４： Verification using multiple cores</text><!--SRC=[dP2_JeGm0CPtdgB1mOcpXRP2SZ8u6-DWRhbpwBM5DeU5q99SV0udVGpNUntdUmKfi709qJYst-_xqtBME5qR47v_VfrFx-VJ1zZ8LXUQi-6-izgKuBMhd6ug2NZTIXi6ru-ra86IHrPwx-YGxSvu7Q0GC0is25mzw5Av-wfRPkEHZIVsIPj34BIIEsRAlYzSxtF5h5hVx7D0uu8WYZbQhLOxqokyxemR988WmZY5D4DZulDnLhyKcGYOP58MT26If8JWD1qaRPfkb7WXC7mhqjuqbVrf_st626D8y8Koca4CAPuYarcaVq-qTKhpWv7Mtk6NAB_uOh_YNyXil2_-1UapezQVjaeB8Sr813y0]--></g></svg></p><p><code>総ハッシュ数 ÷ 1コアあたりの毎秒ハッシュ数</code></p>
<p>シーケンスが正しいことを検証するために必要な想定時間は次のようになる：</p>
<p><code>検証時間 = 総ハッシュ数 ÷ (1コアあたりの毎秒ハッシュ数 × 利用可能なコア数)</code></p>
<p>図4の例では、各コアがシーケンスの各スライスを並列に検証することができる。<br>
すべての入力文字列は、付加されたときのカウンターおよび状態とともに出力に記録されているため、
検証者（verifiers）はそれぞれのスライスを並列に再現することができる。<br>
赤色で示されたハッシュは、シーケンスがデータ挿入によって変更されたことを表している。</p>
<h3 id="44-horizontal-scaling">4.4 Horizontal Scaling </h3>
<p>複数の Proof of History 生成器を同期させることは可能であり、
それぞれの生成器のシーケンス状態を他の生成器と混合することで、
Proof of History 生成器の水平方向のスケーリングを実現することができる。</p>
<p>このスケーリングはシャーディングを用いることなく行われる。<br>
システム内のイベントの完全な順序を再構築するためには、両方の生成器の出力が必要である。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="123.2px" preserveAspectRatio="none" style="width:421px;height:123px;background:#FFFFFF;" version="1.1" viewBox="0 0 421 123" width="421.4px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="132.5051" x="9.8" y="24.582">PoH Generator A</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="9.8" y="44.182">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="41.8934" x="69.6801" y="44.182">Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="39.1043" x="140.8887" y="44.182">Data</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="9.8" y="60.982">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="57.2086" x="69.6801" y="60.982">hash1a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="140.8887" y="60.982">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="9.8" y="77.782">2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="57.2086" x="69.6801" y="77.782">hash2a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="58.4555" x="140.8887" y="77.782">hash1b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="9.8" y="94.582">3</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="57.2086" x="69.6801" y="94.582">hash3a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="140.8887" y="94.582">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="9.8" y="111.382">4</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="57.2086" x="69.6801" y="111.382">hash4a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="140.8887" y="111.382">　</text><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="206.3441" y1="29.4" y2="29.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="206.3441" y1="46.2" y2="46.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="206.3441" y1="63" y2="63"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="206.3441" y1="79.8" y2="79.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="206.3441" y1="96.6" y2="96.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="206.3441" y1="113.4" y2="113.4"></line><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="4.5363" x="206.3441" y="23.182">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="132.8742" x="215.0805" y="24.582">PoH Generator B</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="215.0805" y="44.182">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="41.8934" x="274.9605" y="44.182">Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="39.1043" x="347.416" y="44.182">Data</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="215.0805" y="60.982">1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="58.4555" x="274.9605" y="60.982">hash1b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="347.416" y="60.982">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="215.0805" y="77.782">2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="58.4555" x="274.9605" y="77.782">hash2b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="57.2086" x="347.416" y="77.782">hash1a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="215.0805" y="94.582">3</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="58.4555" x="274.9605" y="94.582">hash3b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="347.416" y="94.582">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="10.582" x="215.0805" y="111.382">4</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="58.4555" x="274.9605" y="111.382">hash4b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="347.416" y="111.382">　</text><line style="stroke:#888888;stroke-width:1.4;" x1="215.0805" x2="411.6246" y1="29.4" y2="29.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="215.0805" x2="411.6246" y1="46.2" y2="46.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="215.0805" x2="411.6246" y1="63" y2="63"></line><line style="stroke:#888888;stroke-width:1.4;" x1="215.0805" x2="411.6246" y1="79.8" y2="79.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="215.0805" x2="411.6246" y1="96.6" y2="96.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="215.0805" x2="411.6246" y1="113.4" y2="113.4"></line><!--SRC=[fP3TJW8n48Nlvodc4Yv0zWT2DeGWek0ASIC_Na_P2ZLBQzekKO64T_L5B2R0QhYpLptdp4o-cOwnfAsXp8APKyRHguQmWKsY1jZdackoIkCrR2OLQB7slKpvU-kAjN6BJWx8BC-gHvOE2Zmyl2qkNUoH-ttjz-0NJ9zECKC82abmB0yBPdWqTxkM4PyyyjhRluZTVo2oIuYiiC5lH7O9aPqGTz3XClqvAIGPIJiT3N7DjH5AklFwDRzUzKlFFCMO9DQQMFEZe1u53Op74pp4PIZrao4QbUivnrGOgmNBhUilGqnhmgTSMh7Y4Jw-SHdt7eu6tigrq4gkkBGGpqRdWaPOwGgBOwuT2Sv6qEClb6VMTSnLAkGYmkdahjA48Sb5JWit-vNWHhcv-YF2EFa6]--></g></svg></p><p>ジェネレーター A および B があるとき、A は B からデータパケット（<code>hash1b</code>）を受信する。
このパケットには、B の最後の状態と、B が観測した A の最後の状態が含まれている。
A における次の状態ハッシュは B の状態に依存するため、<code>hash1b</code> は <code>hash3a</code> より前に発生したことが導き出される。</p>
<p>この性質は推移的であり、たとえばジェネレーター A を介して B および C が同期されている場合、
B と C が直接同期されていなくても、A 経由で A–C 間の依存関係を追跡することができる。</p>
<p>ジェネレーターを定期的に同期させることで、各ジェネレーターは外部トラフィックの一部を処理できるようになり、
全体としてより多くのイベントを追跡可能となる。
ただし、これはジェネレーター間のネットワーク遅延により真の時間精度を犠牲にすることになる。</p>
<p>グローバルな順序付けは、同期ウィンドウ内にあるイベント同士を何らかの決定論的関数、
たとえばハッシュ値そのものの大きさによって並べることで、依然として達成可能である。</p>
<p><strong>図5</strong> では、2つのジェネレーターが互いの出力状態を挿入し、その操作を記録している。
色の変化は、ピアからのデータによってシーケンスが変更されたことを示している。
ストリームに混合された生成ハッシュは 太字 で示されている。
この同期は推移的であり、A–C 間のイベント順序を B を通して証明できる。</p>
<p>このようなスケーリングは可用性のコストを伴う。
たとえば、10 本の 1Gbps 接続がそれぞれ 0.999 の可用性を持つ場合、
システム全体の可用性は <code>0.999^10 = 0.99</code> となる。</p>
<h3 id="45-consistency">4.5 Consistency </h3>
<p>ユーザーは、生成されたシーケンスの一貫性を強制し、それを攻撃に対して耐性のあるものにすることが期待されている。<br>
その方法として、ユーザーは自分が正当とみなすシーケンスの最後に観測された出力を、
自らの入力に挿入することができる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="328px" preserveAspectRatio="none" style="width:568px;height:328px;background:#FFFFFF;" version="1.1" viewBox="0 0 568 328" width="568px" zoomAndPan="magnify"><defs></defs><g><!--entity H1--><g class="entity" data-entity="H1" data-source-line="4" data-uid="ent0002" id="entity_H1"><polygon fill="#8FBC8F" points="267.5,31,253.75,12,226.25,12,212.5,31,226.25,50,253.75,50,267.5,31" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="226.3052" y="29.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="226.3052" y="43.3184">256</text></g><!--entity H2--><g class="entity" data-entity="H2" data-source-line="5" data-uid="ent0003" id="entity_H2"><polygon fill="#8FBC8F" points="267.5,146,253.75,127,226.25,127,212.5,146,226.25,165,253.75,165,267.5,146" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="226.3052" y="144.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="226.3052" y="158.3184">256</text></g><!--entity H3--><g class="entity" data-entity="H3" data-source-line="6" data-uid="ent0004" id="entity_H3"><polygon fill="#FFFACD" points="267.5,268,253.75,249,226.25,249,212.5,268,226.25,287,253.75,287,267.5,268" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="226.3052" y="266.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="226.3052" y="280.3184">256</text></g><!--entity H4--><g class="entity" data-entity="H4" data-source-line="8" data-uid="ent0005" id="entity_H4"><polygon fill="#ADD8E6" points="357.5,31,343.75,12,316.25,12,302.5,31,316.25,50,343.75,50,357.5,31" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="316.3052" y="29.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="316.3052" y="43.3184">256</text></g><!--entity H5--><g class="entity" data-entity="H5" data-source-line="9" data-uid="ent0006" id="entity_H5"><polygon fill="#FFB6C1" points="357.5,146,343.75,127,316.25,127,302.5,146,316.25,165,343.75,165,357.5,146" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="316.3052" y="144.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="316.3052" y="158.3184">256</text></g><!--entity H6--><g class="entity" data-entity="H6" data-source-line="10" data-uid="ent0007" id="entity_H6"><polygon fill="#FFB6C1" points="357.5,268,343.75,249,316.25,249,302.5,268,316.25,287,343.75,287,357.5,268" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="316.3052" y="266.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="316.3052" y="280.3184">256</text></g><!--entity Tx1--><g class="entity" data-entity="Tx1" data-source-line="12" data-uid="ent0008" id="entity_Tx1"><rect fill="#8FBC8F" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="7" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="17" y="29.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.8506" x="53.6885" y="29.3184">99ada51dc...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="17" y="43.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="60.7979" y="43.3184">310146904064</text></g><!--entity Tx2--><g class="entity" data-entity="Tx2" data-source-line="16" data-uid="ent0009" id="entity_Tx2"><rect fill="#8FBC8F" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="7" y="122"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="125.5898" x="17" y="144.3184">hash 2zfd23423...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="17" y="158.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="60.7979" y="158.3184">510145855488</text></g><!--entity Tx3--><g class="entity" data-entity="Tx3" data-source-line="20" data-uid="ent0010" id="entity_Tx3"><rect fill="#FFFACD" height="62" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="7" y="237"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="17" y="259.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.4385" x="53.6885" y="259.3184">b3a83512...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="17" y="273.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="60.7979" y="273.3184">310146904064</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="122.0557" x="17" y="287.3184">input 79a51dzc...</text></g><!--entity Tx4--><g class="entity" data-entity="Tx4" data-source-line="25" data-uid="ent0011" id="entity_Tx4"><rect fill="#ADD8E6" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="393" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="403" y="29.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.7246" x="439.6885" y="29.3184">62f5164c1...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="403" y="43.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="446.7979" y="43.3184">510144806912</text></g><!--entity Tx5--><g class="entity" data-entity="Tx5" data-source-line="29" data-uid="ent0012" id="entity_Tx5"><rect fill="#FFB6C1" height="62" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="393" y="115"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="403" y="137.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.3184" x="439.6885" y="137.3184">3d039eef...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="403" y="151.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="446.7979" y="151.3184">510145855488</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="129.1035" x="403" y="165.3184">input 2zfd23423...</text></g><!--entity Tx6--><g class="entity" data-entity="Tx6" data-source-line="34" data-uid="ent0013" id="entity_Tx6"><rect fill="#FFB6C1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="393" y="244"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="118.542" x="403" y="266.3184">hash 79a51dzc...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="403" y="280.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="446.7979" y="280.3184">510146904064</text></g><!--link H1 to H2--><g class="link" data-entity-1="H1" data-entity-2="H2" data-source-line="38" data-uid="lnk14" id="link_H1_H2"><path d="M240,50.16 C240,71.24 240,99.82 240,120.89" fill="none" id="H1-to-H2" style="stroke:#8FBC8F;stroke-width:4;"></path><polygon fill="#8FBC8F" points="240,126.89,244,117.89,240,121.89,236,117.89,240,126.89" style="stroke:#8FBC8F;stroke-width:4;"></polygon></g><!--link H2 to H3--><g class="link" data-entity-1="H2" data-entity-2="H3" data-source-line="39" data-uid="lnk15" id="link_H2_H3"><path d="M240,165.23 C240,187.91 240,220.41 240,243" fill="none" id="H2-to-H3" style="stroke:#8FBC8F;stroke-width:4;"></path><polygon fill="#8FBC8F" points="240,249,244,240,240,244,236,240,240,249" style="stroke:#8FBC8F;stroke-width:4;"></polygon></g><!--link H4 to H5--><g class="link" data-entity-1="H4" data-entity-2="H5" data-source-line="41" data-uid="lnk16" id="link_H4_H5"><path d="M330,50.16 C330,71.24 330,99.82 330,120.89" fill="none" id="H4-to-H5" style="stroke:#1E90FF;stroke-width:4;"></path><polygon fill="#1E90FF" points="330,126.89,334,117.89,330,121.89,326,117.89,330,126.89" style="stroke:#1E90FF;stroke-width:4;"></polygon></g><!--link H5 to H6--><g class="link" data-entity-1="H5" data-entity-2="H6" data-source-line="42" data-uid="lnk17" id="link_H5_H6"><path d="M330,165.23 C330,187.91 330,220.41 330,243" fill="none" id="H5-to-H6" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="330,249,334,240,330,244,326,240,330,249" style="stroke:#B22222;stroke-width:4;"></polygon></g><!--reverse link Tx1 to H1--><g class="link" data-entity-1="Tx1" data-entity-2="H1" data-source-line="44" data-uid="lnk19" id="link_Tx1_H1"><path d="M183.27,31 C194.87,31 200.47,31 212.07,31" fill="none" id="Tx1-backto-H1" style="stroke:#8FBC8F;stroke-width:4;"></path><polygon fill="#8FBC8F" points="177.27,31,186.27,35,182.27,31,186.27,27,177.27,31" style="stroke:#8FBC8F;stroke-width:4;"></polygon></g><!--reverse link Tx2 to H2--><g class="link" data-entity-1="Tx2" data-entity-2="H2" data-source-line="45" data-uid="lnk21" id="link_Tx2_H2"><path d="M183.27,146 C194.87,146 200.47,146 212.07,146" fill="none" id="Tx2-backto-H2" style="stroke:#8FBC8F;stroke-width:4;"></path><polygon fill="#8FBC8F" points="177.27,146,186.27,150,182.27,146,186.27,142,177.27,146" style="stroke:#8FBC8F;stroke-width:4;"></polygon></g><!--reverse link Tx3 to H3--><g class="link" data-entity-1="Tx3" data-entity-2="H3" data-source-line="46" data-uid="lnk23" id="link_Tx3_H3"><path d="M183.27,268 C194.87,268 200.47,268 212.07,268" fill="none" id="Tx3-backto-H3" style="stroke:#DAA520;stroke-width:4;"></path><polygon fill="#DAA520" points="177.27,268,186.27,272,182.27,268,186.27,264,177.27,268" style="stroke:#DAA520;stroke-width:4;"></polygon></g><!--link H4 to Tx4--><g class="link" data-entity-1="H4" data-entity-2="Tx4" data-source-line="47" data-uid="lnk24" id="link_H4_Tx4"><path d="M357.75,31 C369.49,31 375.24,31 386.98,31" fill="none" id="H4-to-Tx4" style="stroke:#1E90FF;stroke-width:4;"></path><polygon fill="#1E90FF" points="392.98,31,383.98,27,387.98,31,383.98,35,392.98,31" style="stroke:#1E90FF;stroke-width:4;"></polygon></g><!--link H5 to Tx5--><g class="link" data-entity-1="H5" data-entity-2="Tx5" data-source-line="48" data-uid="lnk25" id="link_H5_Tx5"><path d="M357.75,146 C369.49,146 375.24,146 386.98,146" fill="none" id="H5-to-Tx5" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="392.98,146,383.98,142,387.98,146,383.98,150,392.98,146" style="stroke:#B22222;stroke-width:4;"></polygon></g><!--link H6 to Tx6--><g class="link" data-entity-1="H6" data-entity-2="Tx6" data-source-line="49" data-uid="lnk26" id="link_H6_Tx6"><path d="M357.75,268 C369.49,268 375.24,268 386.98,268" fill="none" id="H6-to-Tx6" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="392.98,268,383.98,264,387.98,268,383.98,272,392.98,268" style="stroke:#B22222;stroke-width:4;"></polygon></g><!--link H2 to H5--><g class="link" data-entity-1="H2" data-entity-2="H5" data-source-line="51" data-uid="lnk27" id="link_H2_H5"><path d="M267.77,146 C279.28,146 284.78,146 296.29,146" fill="none" id="H2-to-H5" style="stroke:#8FBC8F;stroke-width:4;"></path><polygon fill="#8FBC8F" points="302.29,146,293.29,142,297.29,146,293.29,150,302.29,146" style="stroke:#8FBC8F;stroke-width:4;"></polygon></g><!--reverse link H3 to H6--><g class="link" data-entity-1="H3" data-entity-2="H6" data-source-line="52" data-uid="lnk29" id="link_H3_H6"><path d="M273.77,268 C285.28,268 290.78,268 302.29,268" fill="none" id="H3-backto-H6" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="267.77,268,276.77,272,272.77,268,276.77,264,267.77,268" style="stroke:#B22222;stroke-width:4;"></polygon></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229.373" x="162.6226" y="317.3184">図５： Two generators synchronizing</text><!--SRC=[ZPBFJkCm4CRlVGgh7FP4IVmd919RQLa47112m0qukF4aiTeT8oSLqFVW0e_1jQ_3cLV0oKRQDebXZxP__cQ- -IQLzvKsICRlhsyVw-UFzGkvVZ0a1mGhAsDBKZvXMbY3UgKn7uz-d1i5er41ZpAl_rsT_hf5Ag8naIKv3SdEaRJpAv0d5W1z6Fq_Z96TC_XZy7UXiyoWjoftdCwBwd2n11yZMkP2uzp7H9lCo49QISmNGCO7isaXo-9WRpObIIAL5A5A9vF9BRgNr2onQfvO68GyIW8UHBnHl7xi3cH0bT1LfYZZb3d5MgUZAcfL4Gl1uxXLfT-hDbzdJCPCXFJhLfidZVVBYkmdjRLLsdRIbklbu2aNqKo44K_3Vht618-3A0bfgxgLca-IgO0b09b7iHtBXeFkCDjYufjekyw7YcqdkxqiRlDtbNd0cwhGwHoXB7_okzrfVzNTnJ38kfcwjHucdPSZetAmpUJSSHXp3Hvh2uVMNVzjS05PrSNwArftE4psl30VwSoSc8K2l3IgCMBhKVKvthFY0SMc6MVDntLCKm_Op73BIZHifOxbd-0d]--></g></svg></p><p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="123.2px" preserveAspectRatio="none" style="width:508px;height:123px;background:#FFFFFF;" version="1.1" viewBox="0 0 508 123" width="508.2px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="127.8785" x="9.8" y="24.582">PoH シーケンス A</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="9.8" y="44.182">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="41.8934" x="69.6801" y="44.182">Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="137.9437" y="44.182">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="9.8" y="60.982">10</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="69.6801" y="60.982">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="137.9437" y="60.982">hash10a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="9.8" y="77.782">20</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="54.2637" x="69.6801" y="77.782">Event1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="137.9437" y="77.782">hash20a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="9.8" y="94.582">30</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="54.2637" x="69.6801" y="94.582">Event2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="137.9437" y="94.582">hash30a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="9.8" y="111.382">40</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="54.2637" x="69.6801" y="111.382">Event3</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="137.9437" y="111.382">hash40a</text><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="250.2719" y1="29.4" y2="29.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="250.2719" y1="46.2" y2="46.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="250.2719" y1="63" y2="63"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="250.2719" y1="79.8" y2="79.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="250.2719" y1="96.6" y2="96.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="9.8" x2="250.2719" y1="113.4" y2="113.4"></line><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="4.5363" x="250.2719" y="23.182">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="177.3023" x="259.0082" y="24.582">PoH 隠れたシーケンス B</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="259.0082" y="44.182">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="41.8934" x="318.8883" y="44.182">Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="387.152" y="44.182">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="259.0082" y="60.982">10</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="318.8883" y="60.982">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.0375" x="387.152" y="60.982">hash10b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="259.0082" y="77.782">20</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="54.2637" x="318.8883" y="77.782">Event3</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.0375" x="387.152" y="77.782">hash20b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="259.0082" y="94.582">30</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="54.2637" x="318.8883" y="94.582">Event2</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.0375" x="387.152" y="94.582">hash30b</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="259.0082" y="111.382">40</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="54.2637" x="318.8883" y="111.382">Event1</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="69.0375" x="387.152" y="111.382">hash40b</text><line style="stroke:#888888;stroke-width:1.4;" x1="259.0082" x2="499.4801" y1="29.4" y2="29.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="259.0082" x2="499.4801" y1="46.2" y2="46.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="259.0082" x2="499.4801" y1="63" y2="63"></line><line style="stroke:#888888;stroke-width:1.4;" x1="259.0082" x2="499.4801" y1="79.8" y2="79.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="259.0082" x2="499.4801" y1="96.6" y2="96.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="259.0082" x2="499.4801" y1="113.4" y2="113.4"></line><!--SRC=[hP7DJi90483l-nHpX0FOFmXf2444nGgXaH_FMxf2JTcIxhPHWGJBrIVmegzWF1WJtsPFleMhs1HClBcdcVbs9lDbwepZa3FiSyJ6s2UW5WsqG0ixQ8D8NiNcNIJFOlCYaZSuH8j10LMTsYbroNNrmAd14cJQncoQPRs8poCEQH6f2iYt1B5U0sp3gMIgWf7sWreneLnDYIQ9lakqbEYI6Bj4JuaXoMfLPTujCTNQShl_nyEJIEx5tUDlaSR_YZZx8deculmfukoBg9c88qLMg4we-tqLPFkOyc6t0p49cHTGUI5DqKf5BNT1NB0m1QK2YcRg9LClWzKVm1VEezo9tG4MHE6OWEin7dfEn6L_7baund0UKUxDY0czEQ5MyomjG8l6NXZGcTmAMQDkzg5i51eUXpu9vIOmwg8ckSIHpsN7E70zEZ5XE3WkL507qqc49tBs5KP7WPmRtfXWsPy0]--></g></svg></p><p>悪意のある PoH 生成器は、すべてのイベントに一度にアクセスできる場合や、より高速な隠れたシーケンスを生成できる場合、イベントの順序を逆にした第二の隠れたシーケンスを作成することが可能である。</p>
<p>この攻撃を防ぐために、各クライアントが生成するイベントには、
そのクライアントが正当とみなすシーケンスから最後に観測したハッシュを
イベントの中に含めるべきである。</p>
<p>つまり、クライアントが <code>Event1</code> のデータを作成する際には、
自身が最後に観測したハッシュを付加しておく必要がある。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="121.8px" preserveAspectRatio="none" style="width:545px;height:121px;background:#FFFFFF;" version="1.1" viewBox="0 0 545 121" width="546px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="127.8785" x="8.4" y="23.182">PoH シーケンス A</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="41.8934" x="68.2801" y="42.782">Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="424.6293" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="59.582">10</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="68.2801" y="59.582">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="424.6293" y="59.582">hash10a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="76.382">20</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="342.3492" x="68.2801" y="76.382">Event1 = append(event1 のデータ, hash10a)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="424.6293" y="76.382">hash20a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="93.182">30</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="342.3492" x="68.2801" y="93.182">Event2 = append(event2 のデータ, hash20a)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="424.6293" y="93.182">hash30a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="109.982">40</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="342.3492" x="68.2801" y="109.982">Event3 = append(event3 のデータ, hash30a)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="424.6293" y="109.982">hash40a</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.9574" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.9574" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.9574" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.9574" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.9574" y1="95.2" y2="95.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="536.9574" y1="112" y2="112"></line><!--SRC=[bT3DJi9040Vm-px5724HRBU5a0O9AYXM28ryU5xe2ZLbIzfjem4IX8DlOs8y61CJ7sPVn14bV8IBSvlPdL_-cN8aMIWZvaiIzPdFGS-QX4oSe0PgyQwMdshngfPlQl41fsJIpf1YhtGbNFvGFEwLO0hOrbWqt7JDM8vZ2UiXqJN0ceAQp-4VDOKX2hh62Fq3gWaNKeSJOECn5swA__RgwKKjdrT1luxMI-ajWw9XR1jqpw073Bfh66YOsuQnPnW736FNCD6OpKWPTrRd9exFXEmqwf3mCF82WQUd6irbQUgMks0p0Le1D6ePESl8WzrgmyzpcgGkdJf4GHpsERXU94El5qlSJnER9GnkOY6z4RUWYV7iolLw05MHU64WHXYNsDt6vaFUp9nv4beyn2JGRP0AlsEnBt6Z7xYU65ZGQLza2gJEn21c0xJl6JaFq0qVBR2TRm00]--></g></svg></p><p>シーケンスが公開されると、<code>Event3</code> は <code>hash30a</code> を参照していることになる。<br>
もしこのハッシュが <code>Event3</code> よりも前のシーケンス内に存在しない場合、
そのシーケンスは無効なものであると、シーケンスの利用者は判断できる。</p>
<p>このとき、部分的な並べ替え攻撃（partial reordering attack）が可能なのは、
クライアントがイベントを観測してからそのイベントがシーケンスに挿入されるまでの間に
生成されたハッシュの数に限定される。</p>
<p>したがって、クライアントは、最後に観測したハッシュと挿入されたハッシュの間の短期間 においては、
順序が正しいとは限らないという前提で動作するソフトウェアを実装すべきである。</p>
<p>また、悪意のある PoH 生成器がクライアントのイベントハッシュを書き換えるのを防ぐために、
クライアントは単にデータを提出するのではなく、
イベントデータと最後に観測したハッシュを含めて署名したものを提出することができる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SALT" height="121.8px" preserveAspectRatio="none" style="width:729px;height:121px;background:#FFFFFF;" version="1.1" viewBox="0 0 729 121" width="729.4px" zoomAndPan="magnify"><defs></defs><g><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="291.9984" x="8.4" y="23.182">PoH シーケンス A（クライアント署名付き）</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="45.8801" x="8.4" y="42.782">Index</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="41.8934" x="68.2801" y="42.782">Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" font-weight="bold" lengthAdjust="spacing" textLength="105.3281" x="608.4367" y="42.782">Output Hash</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="59.582">10</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="16.8" x="68.2801" y="59.582">　</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="608.4367" y="59.582">hash10a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="76.382">20</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="526.1566" x="68.2801" y="76.382">Event1 = sign(append(event1 のデータ, hash10a), クライアント秘密鍵)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="608.4367" y="76.382">hash20a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="93.182">30</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="526.1566" x="68.2801" y="93.182">Event2 = sign(append(event2 のデータ, hash20a), クライアント秘密鍵)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="608.4367" y="93.182">hash30a</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="21.1641" x="8.4" y="109.982">40</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="526.1566" x="68.2801" y="109.982">Event3 = sign(append(event3 のデータ, hash30a), クライアント秘密鍵)</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacing" textLength="67.7906" x="608.4367" y="109.982">hash40a</text><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="720.7648" y1="28" y2="28"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="720.7648" y1="44.8" y2="44.8"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="720.7648" y1="61.6" y2="61.6"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="720.7648" y1="78.4" y2="78.4"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="720.7648" y1="95.2" y2="95.2"></line><line style="stroke:#888888;stroke-width:1.4;" x1="8.4" x2="720.7648" y1="112" y2="112"></line><!--SRC=[bP5FIm916CRlyodUeqBMEgiHYudzhqrHKkiykfDjwApipagHGUv2sK7ew3c2w99KH4H67sQAwDHNQFeZMUp5z_O-yxplxndUbCE9pHrIvSWfaog5w7WCeRsSjGp2knD-NtXNmhyHtZtClFVRmki9_q9uPy8x_PJzzklZzSj9v_cXArgTz_unsYj4KAAKN646tKbCb9BG1Dak4sVhjykwlEvo68Wege2i9eY30_XVJTYIjgX24FvnBJGeur6O1iUii12froapGlHR5ArBuHzznNuQ6qo6no0WztdtfNVurhaD_oLXILA7IJY8X0D8U4IIAacnOP8QH583IEg8f9WaxU-Zb5pwTMcKgnB6YvaqDAZjc1QJLySAZe_Zq0OrG2SCb2bGiAR6DNKIz7m1Ff_3ABIKIuDZkNQPWc4wt3PBBfVpOQIJ1e4rbt6pHZN8olpw_Ef0W0NMC6sBrUH_aBwU-JLCnYAp9eSyjMKIMC-WURf9t2gN4sNBC5b5Ws9XCJA5qeHLN5AHkxS9chFaNdjN0ptt0G00]--></g></svg></p><p>このデータの検証には、署名の検証と、
このイベントよりも前にあるシーケンス内のハッシュの検索が必要となる。</p>
<p>検証手順：</p>
<ul>
<li>Verify: (Signature, PublicKey, hash30a, event3 のデータ) = Event3</li>
<li>Verify(Signature, PublicKey, Event3)</li>
<li>Lookup(hash30a, PoHSequence)</li>
</ul>
<p><strong>図6</strong> では、ユーザーが提供した入力は、<code>0xdeadbeef...</code> というハッシュが生成されたシーケンス内に、<br>
挿入される以前のどこかの時点で存在していたことに依存している。</p>
<p>左上の青い矢印は、クライアントが以前に生成されたハッシュを参照していることを示している。<br>
このクライアントのメッセージは、<code>0xdeadbeef...</code> を含むシーケンス内でのみ有効である。</p>
<p>シーケンス中の赤色は、クライアントのデータによってシーケンスが変更されたことを示している。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="314px" preserveAspectRatio="none" style="width:497px;height:314px;background:#FFFFFF;" version="1.1" viewBox="0 0 497 314" width="497px" zoomAndPan="magnify"><defs></defs><g><!--entity H1--><g class="entity" data-entity="H1" data-source-line="4" data-uid="ent0002" id="entity_H1"><polygon fill="#ADD8E6" points="286,31,272.25,12,244.75,12,231,31,244.75,50,272.25,50,286,31" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="244.8052" y="29.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="244.8052" y="43.3184">256</text></g><!--entity H2--><g class="entity" data-entity="H2" data-source-line="5" data-uid="ent0003" id="entity_H2"><polygon fill="#FFB6C1" points="286,146,272.25,127,244.75,127,231,146,244.75,165,272.25,165,286,146" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="244.8052" y="144.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="244.8052" y="158.3184">256</text></g><!--entity H3--><g class="entity" data-entity="H3" data-source-line="6" data-uid="ent0004" id="entity_H3"><polygon fill="#FFB6C1" points="286,261,272.25,242,244.75,242,231,261,244.75,280,272.25,280,286,261" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="244.8052" y="259.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="244.8052" y="273.3184">256</text></g><!--entity Tx1--><g class="entity" data-entity="Tx1" data-source-line="8" data-uid="ent0005" id="entity_Tx1"><rect fill="#8FBC8F" height="62" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="188.998" x="7" y="115"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="36.4219" x="17" y="137.3184">input</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.79" x="57.2021" y="137.3184">event data</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61.2295" x="17" y="151.3184">last hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.7803" x="78.2295" y="151.3184">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="94.5273" x="82.0098" y="151.3184">0xdeadbeef...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="74.9082" x="17" y="165.3184">event hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.7803" x="91.9082" y="165.3184">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90.3096" x="95.6885" y="165.3184">0xc0debab...</text></g><!--entity Tx2--><g class="entity" data-entity="Tx2" data-source-line="13" data-uid="ent0006" id="entity_Tx2"><rect fill="#8FBC8F" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="321.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="131.2158" x="331.5" y="29.3184">hash 0xdeadbeef...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="331.5" y="43.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="375.2979" y="43.3184">510144806912</text></g><!--entity Tx3--><g class="entity" data-entity="Tx3" data-source-line="17" data-uid="ent0007" id="entity_Tx3"><rect fill="#FFB6C1" height="62" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="321.5" y="115"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="32.9082" x="331.5" y="137.3184">hash</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.7803" x="364.4082" y="137.3184">&nbsp;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90.3096" x="368.1885" y="137.3184">0xbadc0de...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="331.5" y="151.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="375.2979" y="151.3184">510145855488</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130.5117" x="331.5" y="165.3184">input 0xc0debab...</text></g><!--entity Tx4--><g class="entity" data-entity="Tx4" data-source-line="22" data-uid="ent0008" id="entity_Tx4"><rect fill="#FFB6C1" height="48" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.6182" x="321.5" y="237"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="118.542" x="331.5" y="259.3184">hash 79a51dzc...</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="40.0176" x="331.5" y="273.3184">count</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.8203" x="375.2979" y="273.3184">510146904064</text></g><!--link H1 to H2--><g class="link" data-entity-1="H1" data-entity-2="H2" data-source-line="26" data-uid="lnk9" id="link_H1_H2"><path d="M258.5,50.16 C258.5,71.24 258.5,99.82 258.5,120.89" fill="none" id="H1-to-H2" style="stroke:#1E90FF;stroke-width:4;"></path><polygon fill="#1E90FF" points="258.5,126.89,262.5,117.89,258.5,121.89,254.5,117.89,258.5,126.89" style="stroke:#1E90FF;stroke-width:4;"></polygon></g><!--link H2 to H3--><g class="link" data-entity-1="H2" data-entity-2="H3" data-source-line="27" data-uid="lnk10" id="link_H2_H3"><path d="M258.5,165.16 C258.5,186.24 258.5,214.82 258.5,235.89" fill="none" id="H2-to-H3" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="258.5,241.89,262.5,232.89,258.5,236.89,254.5,232.89,258.5,241.89" style="stroke:#B22222;stroke-width:4;"></polygon></g><!--link H1 to Tx1--><g class="link" data-entity-1="H1" data-entity-2="Tx1" data-source-line="29" data-uid="lnk11" id="link_H1_Tx1"><path d="M240.8,44.74 C217.3,61.65 179.9492,88.5342 148.1292,111.4442" fill="none" id="H1-to-Tx1" style="stroke:#1E90FF;stroke-width:4;"></path><polygon fill="#1E90FF" points="143.26,114.95,152.901,112.9375,147.3177,112.0285,148.2267,106.4452,143.26,114.95" style="stroke:#1E90FF;stroke-width:4;"></polygon></g><!--link Tx1 to H2--><g class="link" data-entity-1="Tx1" data-entity-2="H2" data-source-line="30" data-uid="lnk12" id="link_Tx1_H2"><path d="M196.25,146 C207.76,146 213.27,146 224.78,146" fill="none" id="Tx1-to-H2" style="stroke:#8FBC8F;stroke-width:4;"></path><polygon fill="#8FBC8F" points="230.78,146,221.78,142,225.78,146,221.78,150,230.78,146" style="stroke:#8FBC8F;stroke-width:4;"></polygon></g><!--link H1 to Tx2--><g class="link" data-entity-1="H1" data-entity-2="Tx2" data-source-line="32" data-uid="lnk13" id="link_H1_Tx2"><path d="M286.25,31 C297.99,31 303.74,31 315.48,31" fill="none" id="H1-to-Tx2" style="stroke:#1E90FF;stroke-width:4;"></path><polygon fill="#1E90FF" points="321.48,31,312.48,27,316.48,31,312.48,35,321.48,31" style="stroke:#1E90FF;stroke-width:4;"></polygon></g><!--link H2 to Tx3--><g class="link" data-entity-1="H2" data-entity-2="Tx3" data-source-line="33" data-uid="lnk14" id="link_H2_Tx3"><path d="M286.25,146 C297.99,146 303.74,146 315.48,146" fill="none" id="H2-to-Tx3" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="321.48,146,312.48,142,316.48,146,312.48,150,321.48,146" style="stroke:#B22222;stroke-width:4;"></polygon></g><!--link H3 to Tx4--><g class="link" data-entity-1="H3" data-entity-2="Tx4" data-source-line="34" data-uid="lnk15" id="link_H3_Tx4"><path d="M286.25,261 C297.99,261 303.74,261 315.48,261" fill="none" id="H3-to-Tx4" style="stroke:#B22222;stroke-width:4;"></path><polygon fill="#B22222" points="321.48,261,312.48,257,316.48,261,312.48,265,321.48,261" style="stroke:#B22222;stroke-width:4;"></polygon></g><!--link Tx2 to Tx3--><!--link Tx3 to Tx4--><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216.5693" x="133.2744" y="303.3184">図６： Input with a back reference.</text><!--SRC=[XPAnJiCm48RtF8KL1gQ693WXbKebgWgAX11IsIY3OryJAvLJEIwjU106U0nMNeUvhu3jH2efJHbzzzr__zsPagNYfK3kzyVdzkjj-_MERiLofT2QgnmHb19Q80bpa20eUAvpUbyoS9mSDYGpTTF9rKo4KUmYKg59W4xkU9QhqM85NKpOC0zS55tC-M_6aK0L4Ta2a3j8Xzpu6vobGmGl81HYH96Pq8a5gHJAIPNRf0xu6mQ4fG1pp_DCq69rLPkZFeEKf0rcFJnkz31Z8eifa1i98FPz60Lqk0KjLwAs60L-W77Yn_qWR6J3_sLtnbB2ZBSZub4IHJX9RCgk1dMCSsodTfQBFea2zagFD8lxFlPZt2ZYbg8-Ve-LQ_6aSauB0LLrYPzxGtlmSSaoaFPNwETXJFkxvX96KeThjNsaFibEohnxqZWusBErv4aNMX-axQy3R3dKVhiut9h4DAWdpZbZ81ejn-ZzZMFd1m00]--></g></svg></p><h3 id="46-overhead">4.6 Overhead </h3>
<p>毎秒 <code>4000</code> ハッシュを生成すると、追加で約 <code>160KByte</code> のデータが生成される。<br>
これを検証するには、<code>4000</code> コアを持つ GPU へのアクセスと、おおよそ <code>0.25〜0.75</code> ミリ秒 の時間が必要となる。</p>
<h3 id="47-attacks">4.7 Attacks </h3>
<h4 id="471-reversal">4.7.1 Reversal </h4>
<p>悪意のある順序の逆生成（リバースオーダー）を行うには、攻撃者は2つ目のイベントの後から悪意あるシーケンスを開始する必要がある。
この遅延によって、悪意のないピアツーピアノードが元の順序について通信する時間的余裕が生まれる。</p>
<h4 id="472-speed">4.7.2 Speed </h4>
<p>複数の生成器（ジェネレーター）を持つことは、攻撃への耐性を高めたデプロイメントを可能にする。
1つの生成器は高帯域であり、多数のイベントを自身のシーケンスに混合できる。もう1つの生成器は高速かつ低帯域であり、高帯域生成器と定期的に混合を行う。</p>
<p>この高速シーケンスは、攻撃者が逆生成しなければならない第二のシーケンスを作り出す。</p>
<h3 id="473-ロングレンジ攻撃">4.7.3 ロングレンジ攻撃 </h3>
<p>ロングレンジ攻撃とは、破棄された古いクライアント秘密鍵を取得し、偽の台帳（ledger）を生成する攻撃である<a href="#ref-10">[10]</a>。</p>
<p>Proof of History（PoH）は、こうしたロングレンジ攻撃に対して一定の防御を提供する。</p>
<p>悪意あるユーザーが古い秘密鍵にアクセスできたとしても、
偽造しようとする元の台帳と同じ時間をかけて記録を再生成しなければならない。
つまり、ネットワークが現在使用しているよりも高速なプロセッサを使用しない限り、過去の履歴に追いつくことはできない。</p>
<p>さらに、単一の時間源が存在することによりより単純な Proof of Replication（PoRep）の構築が可能になる。（詳細は第6章参照）</p>
<p>ネットワークは、すべての参加者が単一の履歴記録を信頼するように設計されているため、PoRep と PoH を組み合わせることで、偽造台帳に対して空間と時間の両面から防御を提供できる。</p>
<h2 id="5-proof-of-stake-consensus">5 Proof of Stake Consensus </h2>
<h3 id="51-説明">5.1 説明 </h3>
<p>この特定の Proof of Stake の実装は、以下の目的のために設計されている：</p>
<ul>
<li>Proof of History 生成器によって生成された現在のシーケンスを迅速に確定すること</li>
<li>次の Proof of History 生成器を投票で選出すること</li>
<li>不正行為を行ったバリデーターを処罰すること</li>
</ul>
<p>このアルゴリズムは、すべての参加ノードにメッセージがある一定のタイムアウト以内に最終的に到達することに依存している。</p>
<h3 id="52-用語">5.2 用語 </h3>
<dl>
    <dt>ボンド/証拠資金（bonds）</dt>
    <dd>
    ボンドは、Proof of Work における資本支出に相当する。
    PoW においてマイナーがハードウェアや電力に投資し、1つの分岐にコミットするのと同様に、
    PoS においてはバリデーターがトランザクションを検証している間、担保としてコインをロックする。
    </dd>
    <dt>スラッシング（slashing）</dt>
    <dd>
    これは、PoS システムにおける「何も賭けない問題（nothing-at-stake）」に対する提案された解決策である<a href="#ref-07">[7]</a>。
    異なる分岐に対する投票の証拠が公開された場合、その分岐は該当バリデーターのボンドを破棄することができる。これは、バリデーターが複数の分岐を確認しないようにするための経済的インセンティブである。
    </dd>
    <dt>スーパーマジョリティ（super majority）</dt>
    <dd>
    スーパーマジョリティとは、ボンドの重みによって評価されたバリデーターの 3分の2である。
    スーパーマジョリティによる投票は、ネットワークがコンセンサスに達したことを示す。
    このとき、もしこの分岐が無効であったとすれば、ネットワークの少なくとも3分の1が悪意を持って投票していたことになる。これは、攻撃にかかる経済コストがコインの時価総額の3分の1に相当することを意味する。
    </dd>
</dl>
<h3 id="53-担保bonding">5.3 担保(Bonding) </h3>
<p>ボンディング・トランザクション（bonding transaction）は、
ある量のコインをユーザーのアイデンティティに紐づけられたボンディング・アカウントに移動させる。
ボンディング・アカウント内のコインは使用することができず、
ユーザーが削除するまでそのアカウントに留まらなければならない。
ユーザーはタイムアウトした古いコイン（stale coins）のみを削除することができる。
ボンドは、現在のステークホルダーのスーパーマジョリティによってシーケンスが確認された後に有効となる。</p>
<h3 id="54-投票voting">5.4 投票(Voting) </h3>
<p>Proof of History 生成器は、あらかじめ定義された周期で状態（state）の署名を公開できることが期待されている。
各ボンド済みのアイデンティティ（bonded identity）は、その署名に対して、
自らの署名付き署名（signed signature）を公開することで確認（confirm）しなければならない。</p>
<p>この投票は 単純な「賛成（yes）」のみの投票であり、「反対（no）」は存在しない。タイムアウトの範囲内において、ボンド済みアイデンティティのスーパーマジョリティ（2/3以上）が投票した場合、
そのブランチは有効なものとして受け入れられる。</p>
<h3 id="55-担保解除unbonding">5.5 担保解除(Unbonding) </h3>
<p><code>N</code> 回の投票を欠席すると、そのコインは stale（期限切れ） とみなされ、投票資格を失う。<br>
ユーザーは、それらのコインを削除するためにアンボンディングトランザクション（unbonding transaction） を発行できる。
<code>N</code> は、stale な投票とアクティブな投票の比率に基づいて決まる動的な値である。</p>
<p>stale 投票の数が増えるにつれて、<code>N</code> も増加する。
大規模なネットワーク分断が発生した場合、この仕組みにより、より大きな分岐の方が小さな分岐よりも早く回復できる。</p>
<h3 id="56-選挙elections">5.6 選挙(Elections) </h3>
<p>PoH 生成器の選挙は、PoH 生成器の障害が検出されたときに発生する。<br>
最も大きな投票権を持つバリデーター、または同点の場合は最も高い公開鍵アドレスを持つバリデーターが、新たな PoH 生成器として選出される。</p>
<p>新しいシーケンスには、スーパーマジョリティ（2/3以上）の確認（confirmations）が必要である。
もし新たなリーダーがスーパーマジョリティの確認を得る前に失敗した場合、次に投票力が高いバリデーターが選出され、新たな確認セットが必要となる。</p>
<p>投票を切り替える（vote switching）には、バリデーターがより高い PoH シーケンスカウンターで投票し、新しい投票には切り替えたい投票内容が含まれていなければならない。そうでない場合、2回目の投票はスラッシャブル（罰則対象）となる。</p>
<p>投票切り替えは、スーパーマジョリティがまだ成立していない高さでのみ行えるように設計されることが想定されている。PoH 生成器が確定した後は、セカンダリ（Secondary）が選出され、トランザクション処理の役割を引き継ぐことができる。</p>
<p>セカンダリが存在する場合は、プライマリが失敗した際の次のリーダーとして扱われる。<br>
このプラットフォームは、例外が検出されたときや、あらかじめ定義されたスケジュールに従って、セカンダリがプライマリへと昇格し、下位の生成器が順に昇格していくように設計されている。</p>
<h3 id="57-選挙の契機election-triggers">5.7 選挙の契機(Election Triggers) </h3>
<h4 id="571-forked-proof-of-history-generator">5.7.1 Forked Proof of History generator </h4>
<p>PoH 生成器は、生成されたシーケンスに署名するためのアイデンティティを持つように設計されている。<br>
フォークが発生するのは、PoH 生成器のアイデンティティが侵害された場合に限られる。</p>
<p>フォークは、同じ PoH アイデンティティから2つの異なる履歴（歴史的記録）が公開されたことで検出される。</p>
<h4 id="572-runtime-exceptions">5.7.2 Runtime Exceptions </h4>
<p>ハードウェアの故障、バグ、または PoH 生成器による意図的なエラーによって、無効な状態（invalid state）が生成され、
その状態に対して ローカルバリデーターの結果と一致しない署名が公開される可能性がある。</p>
<p>この場合、バリデーターは 正しい署名をゴシップ（gossip）ネットワーク経由で公開し、このイベントは 新たな選挙ラウンドを開始するトリガーとなる。</p>
<p>無効な状態を受け入れたバリデーターは、ボンドをスラッシュ（slashing）される。</p>
<h4 id="573-network-timeouts">5.7.3 Network Timeouts </h4>
<p>ネットワークタイムアウトが発生すると、選挙（election）がトリガーされる。</p>
<h3 id="58-slashing">5.8 Slashing </h3>
<p>スラッシング（Slashing）は、バリデーターが2つの異なるシーケンスに投票した場合に発生する。
悪意ある投票の証明（proof of malicious vote）が提示されると、ボンドされたコインは流通から除外され、マイニングプールに追加される。
ただし、競合するシーケンスに対する過去の投票を含む新たな投票については、悪意ある投票の証明としては無効である。
この場合、ボンドはスラッシュされず、現在投じられている競合シーケンスへの投票が無効化される。</p>
<p>また、PoH 生成器が生成した無効なハッシュに対して投票が行われた場合もスラッシングが発生する。
PoH 生成器は、ランダムに無効な状態（invalid state）を生成することが期待されており、この場合はセカンダリ（Secondary）へのフォールバックがトリガーされる。</p>
<h3 id="59-secondary-elections">5.9 Secondary Elections </h3>
<p>セカンダリおよび下位ランクの Proof of History 生成器は、提案（proposal）され、承認されることができる。</p>
<p>この提案は、プライマリ生成器のシーケンス上で発行される。
提案にはタイムアウトが含まれており、もしこの期限内にスーパーマジョリティの投票によって承認された場合、
そのセカンダリは選出されたものと見なされ、予定されたとおりに役割を引き継ぐ。</p>
<p>プライマリは、次のいずれかの方法でソフトハンドオーバーを実施できる：</p>
<ul>
<li>生成されたシーケンスに「ハンドオーバーが行われる」ことを示すメッセージを挿入する</li>
<li>無効な状態（invalid state）を挿入して、ネットワークにセカンダリへのフォールバックを強制する</li>
</ul>
<p>セカンダリが選出されており、プライマリが故障した場合、そのセカンダリは、選挙における第一のフォールバック候補として扱われる。</p>
<h3 id="510-可用性availability">5.10 可用性（Availability） </h3>
<p>パーティションを扱う CAP システムは、一貫性（Consistency）と可用性（Availability）のいずれかを選択しなければならない。本システムのアプローチでは、最終的には可用性（Availability）を選択するが、
客観的な時間の指標を持っているため、人間の感覚で妥当なタイムアウトの範囲内で一貫性（Consistency）も維持される。</p>
<p>Proof of Stake（PoS）検証者（verifiers）は、一定量のコインをステーク（ロック）することで、
特定のトランザクション集合に対して投票する権利を持つ。</p>
<p>コインをロックする操作も、他のトランザクションと同様に、PoH ストリーム内にトランザクションとして記録される。</p>
<p>PoS 検証者が投票するには、すべてのトランザクションを特定位置まで処理した後に得られた状態のハッシュに署名する必要がある。この投票もまた、トランザクションとして PoH ストリームに記録される。</p>
<p>PoH レジャーを参照することで、各投票の間にどれだけの時間が経過したかを推測できる。
また、パーティションが発生した場合に、各検証者がどれだけの間ネットワークに不在だったかも判定できる。</p>
<p>人間の時間感覚に適したパーティション対処法として、利用不能な検証者をアンステークする動的な手法を提案する。</p>
<dl>
    <dt>検証者数が高く 2/3 を超えている場合</dt>
    <dd>
        アンステーキングは高速で行われる。
        少ない数のハッシュ生成で、不在の検証者のステークが完全にアンステークされ、
        コンセンサスの計算から除外される。
    </dd>
    <dt>検証者数が 2/3 未満だが 1/2 を超えている場合</dt>
    <dd>
        アンステーキングタイマーは遅くなり、アンステークが完了するまでにより多くのハッシュ生成が必要となる。
    </dd>
    <dt>1/2 以上の検証者が不在という大規模なパーティションの場合</dt>
    <dd>
        アンステーキングプロセスは極めて遅くなる。  
        トランザクションは引き続きストリームに挿入可能であり、検証者は投票もできるが、  
        2/3 の完全なコンセンサスには、非常に大量のハッシュ生成と、  
        不在検証者のアンステーク完了が必要となる。
    </dd>
</dl>
<p>ネットワークが再びリブネス（liveness）を回復するまでの時間差が生じることで、ネットワークの利用者は人間の時間スケールで、自分が使い続けたいパーティションを選択することが可能となる。</p>
<h3 id="511-recovery">5.11 Recovery </h3>
<p>本システムにおいては、台帳（レジャー）はいかなる障害からでも完全に復旧可能である。</p>
<p>つまり、世界中の誰でも台帳内の任意の地点を選び、<br>
新たに生成したハッシュとトランザクションを付加することで、<br>
有効なフォークを作成することができる。</p>
<p>ただし、そのフォークに検証者（verifiers）が1人も存在しない場合、
新たなボンドが有効になり、そのブランチが2/3 のスーパーマジョリティコンセンサスを達成するには、
非常に長い時間がかかる。</p>
<p>つまり、利用可能な検証者がゼロの状態から完全復旧を行うには、非常に大量のハッシュを台帳に追加する必要がある。</p>
<p>そして、すべての不在検証者がアンステークされた後に限り、新たにステークされたボンドが台帳を検証できるようになる。</p>
<h3 id="512-finality">5.12 Finality </h3>
<p>PoH は、ネットワーク上の検証者（verifiers）が過去に何が起きたかを観測できるようにする。<br>
このとき、各イベントの発生時刻についても、ある程度の確実性を持って把握できる。</p>
<p>PoH 生成器がメッセージのストリームを生成している間、すべての検証者は 500 ミリ秒以内に状態（state）に対する署名を提出する必要がある。この時間は、ネットワーク状況に応じてさらに短縮することも可能である。</p>
<p>各検証者の検証（verification）は PoH ストリームに記録されるため、ネットワーク上の誰もが、投票行動を直接観測せずとも、すべての検証者が所定のタイムアウト内に投票を行ったかを検証できる。</p>
<h3 id="513-攻撃attacks">5.13 攻撃（Attacks） </h3>
<h4 id="5131-tragedy-of-commons">5.13.1 Tragedy of Commons </h4>
<p>PoS 検証者（verifiers）は、PoH 生成器によって生成された状態ハッシュを単に確認（confirm）する。<br>
このとき、すべての状態ハッシュを無条件に承認することで作業を回避しようとする経済的インセンティブが発生する可能性がある。</p>
<p>この状況を防ぐために、PoH 生成器はランダムな間隔で無効なハッシュを挿入すべきである。<br>
その無効なハッシュに投票した検証者は、スラッシュ（slashing）される。</p>
<p>無効なハッシュが生成された場合、ネットワークは即座にセカンダリ（Secondary）として選出されていた PoH 生成器を昇格させる必要がある。</p>
<p>各検証者は、短いタイムアウト（たとえば 500ms）以内に応答することが要求される。<br>
このタイムアウトは、悪意のある検証者が他の検証者の投票を観測してから自分の投票をストリームに間に合わせる確率を低くするように設定されるべきである。</p>
<h4 id="5132-collusion-with-the-poh-generator">5.13.2 Collusion with the PoH generator </h4>
<p>PoH 生成器と共謀している検証者（verifier）は、無効なハッシュがいつ生成されるかを事前に知っており、そのハッシュには投票しない可能性がある。</p>
<p>このシナリオは、実質的にはPoH のアイデンティティがより大きな検証者ステークを保有している場合とほとんど違いがない。</p>
<p>たとえそうであっても、PoH 生成器は状態ハッシュを生成するためのすべての作業を行う必要がある。</p>
<h4 id="5133-censorship">5.13.3 Censorship </h4>
<p>検閲（Censorship）や サービス拒否（Denial of Service） は、
ボンド保有者の 1/3 が、新しいボンドを含むシーケンスの検証を拒否した場合に発生しうる。</p>
<p>この種の攻撃に対して、プロトコルは以下の方法で防御することができる：</p>
<ul>
<li>ボンドが stale（期限切れ）になる速度を動的に調整することで対抗する。</li>
</ul>
<p>サービス拒否攻撃が発生した場合、より大きなパーティション（ネットワーク分割）はフォークを行い、
ビザンチン的なボンド保有者を検閲する設計となっている。</p>
<p>その後、時間の経過とともにビザンチンボンドが stale になることで、大きなネットワークは回復し、スーパーマジョリティを取り戻す。</p>
<p>一方、小さなビザンチン側パーティションは、長期間にわたり前進できない状態に置かれる。</p>
<p>このアルゴリズムの流れは次の通り：</p>
<ol>
<li>ネットワークの過半数が新しいリーダーを選出する。</li>
<li>選出されたリーダーは、ビザンチンなボンド保有者の参加を検閲する。</li>
<li>PoH 生成器は連続してシーケンスを生成し続けることで、時間の経過を証明する。</li>
<li>それにより、十分な数のビザンチンボンドが stale となるまで時間を稼ぐ。</li>
<li>大きなネットワーク側がスーパーマジョリティを達成する。</li>
</ol>
<p>ボンドが stale になる速度は、アクティブなボンドの割合に基づいて動的に決定される。<br>
そのため、ビザンチン側のマイノリティフォークは、スーパーマジョリティの回復により長い時間を要することになる。</p>
<p>スーパーマジョリティが確立された後、スラッシング（Slashing）によって、ビザンチンボンド保有者を恒久的に処罰することが可能となる。</p>
<h4 id="5134-long-range-attacks">5.13.4 Long Range Attacks </h4>
<p>PoH（Proof of History）は、ロングレンジ攻撃に対する自然な防御手段を提供する。</p>
<p>過去の任意の地点から台帳を復元しようとする場合、攻撃者は PoH 生成器の速度を上回って、正当な台帳を時間的に追い越す必要がある。</p>
<p>さらに、コンセンサスプロトコルは第二の防御層を提供する。というのも、いかなる攻撃も、すべての正当な検証者をアンステークさせるのにかかる時間よりも長くかかる必要があるためである。</p>
<p>この仕組みによって、台帳の履歴には可用性ギャップ（availability gap）が生じる。つまり、同じ高さの 2 つの台帳を比較する場合、最大分断（maximum partition）が最も小さい方が、客観的に正当なものとみなすことができる。</p>
<h4 id="5135-asic-attacks">5.13.5 ASIC Attacks </h4>
<p>このプロトコルにおいて、ASIC 攻撃が成立する可能性のあるタイミングは 2 つ存在する：</p>
<dl>
    <dt>パーティション発生時  (パーティション中の ASIC 攻撃)  </dt>
    <dd>
        パーティション発生時には、攻撃者が高速な ASIC を使って台帳のフォークを有利に進めることを試みる可能性がある。しかし、本プロトコルでは、ボンドがアンステークされる速度は非線形であり、ネットワークが大規模に分断されている場合、アンステークの進行は ASIC 攻撃で得られる想定利益よりも桁違いに遅い。
    </dd>
    <dt>ファイナリティ（最終確定）におけるタイムアウトの不正操作時  </dt>
    <dd>
        この脆弱性では、ビザンチンな（悪意ある）バリデーターがボンドを持ったまま他のノードからの確認を待ち、共謀する PoH 生成器と連携して投票を挿入することができる。
        PoH 生成器が高速な ASIC を用いれば、500ms 相当のハッシュをそれより短時間で生成でき、
        その間に PoH 生成器と協力ノード間で通信が成立してしまう可能性がある。
        だが、もし PoH 生成器自身もビザンチンであるならば、攻撃者はあらかじめいつ失敗を挿入するかのカウンターを共有しておくことができる。
        このシナリオは本質的に、PoH 生成器と協力ノードが同じアイデンティティとステークを持ち、
        1つのハードウェアセットを使って動作しているのと変わらない。
    </dd>
</dl>
<h2 id="6-streaming-proof-of-replication">6 Streaming Proof of Replication </h2>
<h3 id="61-description">6.1 Description </h3>
<p>Filecoin は、Proof of Replication（PoRep）のあるバージョンを提案している<a href="#ref-06">[6]</a>。<br>
このバージョンの目的は、Proof of History によって生成されたシーケンス上で
時間を追跡することで、PoRep の検証を高速かつストリーミングで実行可能にすることである。</p>
<p>Replication はコンセンサスアルゴリズムとしては使用されないが、
ブロックチェーンの履歴や状態を高可用性で保存するコストを計上するための有用な手段として機能する。</p>
<h3 id="62-algorithm">6.2 Algorithm </h3>
<p>図7に示されているように、CBC暗号（Cipher Block Chaining）は、
各データブロックを逐次的に暗号化し、直前の暗号化ブロックを使用して入力データに XOR を適用する。</p>
<p>各リプリケーション・アイデンティティ（replication identity）は、
Proof of History シーケンスで生成されたハッシュに署名することで鍵を生成する。<br>
これにより、鍵はリプリケータのアイデンティティと、特定の PoH シーケンスに結びつけられる。</p>
<p>選択できるハッシュは特定のものに限られる（詳細は セクション6.5「ハッシュの選択」を参照）。</p>
<p>データセットは、すべてのブロックを逐次的に完全に暗号化される。<br>
次に、証明（proof）を生成するために、生成した鍵を使って
疑似乱数生成器（pseudorandom number generator）にシードを与え、各ブロックからランダムに 32 バイトを選択する。</p>
<p>各スライスには、選択された PoH ハッシュを先頭に付加し、マークルハッシュ（Merkle hash）が計算される。<br>
このときのルート（Merkle root）と、使用された鍵、選択されたハッシュが公開される。</p>
<p>リプリケーションノードは、PoH 生成器によって N 個のハッシュが生成されるごとに、新たな証明を公開する必要がある。<br>
ここでの <code>N</code> は、データを暗号化するのにかかる時間の約 1/2 に相当する。</p>
<p>PoH 生成器は、PoRep（Proof of Replication）のための特定のハッシュをあらかじめ定義された周期で公開する。
リプリケータノードは、次に公開されるハッシュを選択して証明を生成しなければならない。</p>
<p>同様に、そのハッシュは署名され、各ブロックからランダムにスライスが選択され、マークルルートが作られる。</p>
<p><code>N</code> 個の証明期間が過ぎた後、データは新しい CBC 鍵で再暗号化される。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="282px" preserveAspectRatio="none" style="width:468px;height:282px;background:#FFFFFF;" version="1.1" viewBox="0 0 468 282" width="468px" zoomAndPan="magnify"><defs></defs><g><!--entity B1--><g class="entity" data-entity="B1" data-source-line="12" data-uid="ent0002" id="entity_B1"><rect fill="#8FBC8F" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6592" x="7" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.6592" x="17" y="29.3184">block1</text></g><!--entity B2--><g class="entity" data-entity="B2" data-source-line="13" data-uid="ent0003" id="entity_B2"><rect fill="#8FBC8F" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6592" x="107" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.6592" x="117" y="29.3184">block2</text></g><!--entity B3--><g class="entity" data-entity="B3" data-source-line="14" data-uid="ent0004" id="entity_B3"><rect fill="#8FBC8F" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.6592" x="207" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.6592" x="217" y="29.3184">block3</text></g><!--entity CBC1--><g class="entity" data-entity="CBC1" data-source-line="15" data-uid="ent0005" id="entity_CBC1"><polygon fill="#ADD8E6" points="72,120,58.25,101,30.75,101,17,120,30.75,139,58.25,139,72,120" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="30.8052" y="118.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="30.8052" y="132.3184">256</text></g><!--entity CBC2--><g class="entity" data-entity="CBC2" data-source-line="16" data-uid="ent0006" id="entity_CBC2"><polygon fill="#ADD8E6" points="167,120,153.25,101,125.75,101,112,120,125.75,139,153.25,139,167,120" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="125.8052" y="118.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="125.8052" y="132.3184">256</text></g><!--entity CBC3--><g class="entity" data-entity="CBC3" data-source-line="17" data-uid="ent0007" id="entity_CBC3"><polygon fill="#ADD8E6" points="262,120,248.25,101,220.75,101,207,120,220.75,139,248.25,139,262,120" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6104" x="220.8052" y="118.3184">SHA</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.4551" x="220.8052" y="132.3184">256</text></g><!--entity MEMO1--><g class="entity" data-entity="MEMO1" data-source-line="18" data-uid="ent0008" id="entity_MEMO1"><rect fill="none" height="54" rx="2.5" ry="2.5" width="455.4863" x="7" y="199"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="17" y="212.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#800080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="152.6426" x="36.4414" y="212.5586">・暗号化対象の現在のブロック</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="17" y="224.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#B22222" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="402.6094" x="36.4414" y="224.5586">・暗号化前に、前の暗号化済みブロックのデータと現在のブロックをXOR演算する</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="416.0449" x="36.4414" y="236.5586">・この仕組みにより、暗号化は逐次的にしか行えず、ストリーミング処理が可能になる</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="17" y="248.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text></g><!--link B1 to CBC1--><g class="link" data-entity-1="B1" data-entity-2="CBC1" data-source-line="24" data-uid="lnk9" id="link_B1_CBC1"><path d="M40.37,41.37 C41.26,58 42.2999,77.6785 43.2199,94.8985" fill="none" id="B1-to-CBC1" style="stroke:#800080;stroke-width:1;"></path><polygon fill="#800080" points="43.54,100.89,47.0542,91.6894,43.2732,95.8971,39.0655,92.1162,43.54,100.89" style="stroke:#800080;stroke-width:1;"></polygon></g><!--link B2 to CBC2--><g class="link" data-entity-1="B2" data-entity-2="CBC2" data-source-line="25" data-uid="lnk10" id="link_B2_CBC2"><path d="M139.5,41.37 C139.5,58 139.5,77.67 139.5,94.89" fill="none" id="B2-to-CBC2" style="stroke:#800080;stroke-width:1;"></path><polygon fill="#800080" points="139.5,100.89,143.5,91.89,139.5,95.89,135.5,91.89,139.5,100.89" style="stroke:#800080;stroke-width:1;"></polygon></g><!--link B3 to CBC3--><g class="link" data-entity-1="B3" data-entity-2="CBC3" data-source-line="26" data-uid="lnk11" id="link_B3_CBC3"><path d="M238.63,41.37 C237.74,58 236.7001,77.6785 235.7801,94.8985" fill="none" id="B3-to-CBC3" style="stroke:#800080;stroke-width:1;"></path><polygon fill="#800080" points="235.46,100.89,239.9345,92.1162,235.7268,95.8971,231.9458,91.6894,235.46,100.89" style="stroke:#800080;stroke-width:1;"></polygon></g><!--link CBC1 to CBC2--><g class="link" data-entity-1="CBC1" data-entity-2="CBC2" data-source-line="28" data-uid="lnk12" id="link_CBC1_CBC2"><path d="M72.33,120 C85.54,120 92.74,120 105.95,120" fill="none" id="CBC1-to-CBC2" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="111.95,120,102.95,116,106.95,120,102.95,124,111.95,120" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link CBC2 to CBC3--><g class="link" data-entity-1="CBC2" data-entity-2="CBC3" data-source-line="29" data-uid="lnk13" id="link_CBC2_CBC3"><path d="M167.33,120 C180.54,120 187.74,120 200.95,120" fill="none" id="CBC2-to-CBC3" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="206.95,120,197.95,116,201.95,120,197.95,124,206.95,120" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link CBC3 to MEMO1--><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210.5947" x="121.9458" y="271.3184">図７： Sequential CBC encryption</text><!--SRC=[ZPBDRjD058NtVegHMR2AIcp1Aer40YsBbag41H9bCRM7n8er3XD7K11IxQbee46f-6b4G4BPeAf00geGe8RsOIwEmwglm7ZSc98cWbcDhxvxplMvO-2AQpaKgS7hlQD-wwZVHWLofqQeQs4RvNDvHAZ1LYMaAfcgksgJh8B4CJ0pqGDvZSwSGzs2TP-Wj9RKSjWeppEdHisyOpiCkGpJQWKpePum2nObrqkMKQQaMaNd_gh7NIksa97rXqfcvdW2vUnLnoGA8uQBQT4cI5sn7QESLX6kebmQdRc4MRb0y3mZX9x2j1ZJ_e7fCQQFOILo3nUZp0fNBYvJxVm5YOciXEs2LIovERj6fbFQVr7wIKfchSR1P6wBf94HHJEhLcgiOXCr2tn_q6u5pQz1Ople7Gm_Ty3hXis3uCsEk03V1luHE0U_bvc9-hFBT8BQdCL8ZebTZ0a-VWhUUrZpvAMRr0VVwk0TdXINNXl0- -0VWhSpSG3mdzrOkZRelmYxBV1UWRyvDfAm1k-vwFgv_pByiXvP27U_3luJCKFY3bxlrzhMu4CdRAz7W2VKDeUT1dXYghOWmVyEl0vyDvg7lmM-1_wdOEDTkFK8l4RGx0tv3zcuAsOOcSlu5oylBgKLHJoZbEdSfJVTqVkSJTzAPOyt7KUlY4Sq3TB-GFfKI4yWHUgcMBJroMh9VXJvFHNLnz2HUyaoJK8ZAFx3tm00]--></g></svg></p><p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="263px" preserveAspectRatio="none" style="width:473px;height:263px;background:#FFFFFF;" version="1.1" viewBox="0 0 473 263" width="473px" zoomAndPan="magnify"><defs></defs><g><!--entity ROOT--><g class="entity" data-entity="ROOT" data-source-line="17" data-uid="ent0002" id="entity_ROOT"><rect fill="#FFB6C1" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46.9404" x="128.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.9404" x="138.5" y="29.3184">root</text></g><!--entity S1--><g class="entity" data-entity="S1" data-source-line="18" data-uid="ent0003" id="entity_S1"><rect fill="#FFEFD5" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42.6611" x="91.5" y="101"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.6611" x="101.5" y="123.3184">sha</text></g><!--entity S2--><g class="entity" data-entity="S2" data-source-line="19" data-uid="ent0004" id="entity_S2"><rect fill="#FFEFD5" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42.6611" x="169.5" y="101"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.6611" x="179.5" y="123.3184">sha</text></g><!--entity POH--><g class="entity" data-entity="POH" data-source-line="20" data-uid="ent0005" id="entity_POH"><polygon fill="#ADD8E6" points="78,214,62.5,195,31.5,195,16,214,31.5,233,62.5,233,78,214" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.6514" x="33.3325" y="212.3184">PoH</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.1582" x="31.5791" y="226.3184">hash</text></g><!--entity ENC1--><g class="entity" data-entity="ENC1" data-source-line="21" data-uid="ent0006" id="entity_ENC1"><polygon fill="#ADD8E6" points="246.5,214,213.25,195,146.75,195,113.5,214,146.75,233,213.25,233,246.5,214" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.3496" x="146.6748" y="212.3184">encrypted</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.9775" x="165.3608" y="226.3184">data</text></g><!--entity ENC2--><g class="entity" data-entity="ENC2" data-source-line="22" data-uid="ent0007" id="entity_ENC2"><polygon fill="#ADD8E6" points="414.5,214,381.25,195,314.75,195,281.5,214,314.75,233,381.25,233,414.5,214" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.3496" x="314.6748" y="212.3184">encrypted</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.9775" x="333.3608" y="226.3184">data</text></g><!--entity MEMO1--><g class="entity" data-entity="MEMO1" data-source-line="23" data-uid="ent0008" id="entity_MEMO1"><rect fill="none" height="30" rx="2.5" ry="2.5" width="257.2695" x="210.5" y="9"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="220.5" y="22.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#800080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="217.8281" x="239.9414" y="22.5586">・random bytes selected from the block</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="220.5" y="34.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#B22222" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.9473" x="239.9414" y="34.5586">・Proof of History hash</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="362.8887" y="34.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text></g><!--reverse link ROOT to S1--><g class="link" data-entity-1="ROOT" data-entity-2="S1" data-source-line="28" data-uid="lnk10" id="link_ROOT_S1"><path d="M142.8664,46.5533 C135.7464,63.3333 126.98,84.02 119.85,100.85" fill="none" id="ROOT-backto-S1" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="145.21,41.03,138.0123,47.7526,143.257,45.6328,145.3768,50.8774,145.21,41.03" style="stroke:#181818;stroke-width:1;"></polygon></g><!--reverse link ROOT to S2--><g class="link" data-entity-1="ROOT" data-entity-2="S2" data-source-line="29" data-uid="lnk12" id="link_ROOT_S2"><path d="M161.1336,46.5533 C168.2536,63.3333 177.02,84.02 184.15,100.85" fill="none" id="ROOT-backto-S2" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="158.79,41.03,158.6232,50.8774,160.743,45.6328,165.9877,47.7526,158.79,41.03" style="stroke:#181818;stroke-width:1;"></polygon></g><!--reverse link S1 to POH--><g class="link" data-entity-1="S1" data-entity-2="POH" data-source-line="30" data-uid="lnk14" id="link_S1_POH"><path d="M98.0535,140.2814 C86.3835,156.9114 71.81,177.67 59.72,194.89" fill="none" id="S1-backto-POH" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="101.5,135.37,93.056,140.4394,98.6279,139.4628,99.6045,145.0347,101.5,135.37" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--reverse link S2 to POH--><g class="link" data-entity-1="S2" data-entity-2="POH" data-source-line="31" data-uid="lnk16" id="link_S2_POH"><path d="M164.4159,136.35 C136.6459,154.48 93.77,182.47 66.85,200.04" fill="none" id="S2-backto-POH" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="169.44,133.07,159.7172,134.6407,165.2533,135.8034,164.0906,141.3394,169.44,133.07" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--reverse link S1 to ENC1--><g class="link" data-entity-1="S1" data-entity-2="ENC1" data-source-line="32" data-uid="lnk18" id="link_S1_ENC1"><path d="M128.1519,140.2564 C140.0019,156.8864 154.82,177.67 167.09,194.89" fill="none" id="S1-backto-ENC1" style="stroke:#800080;stroke-width:1;"></path><polygon fill="#800080" points="124.67,135.37,126.6352,145.0208,127.5716,139.442,133.1504,140.3783,124.67,135.37" style="stroke:#800080;stroke-width:1;"></polygon></g><!--reverse link S2 to ENC2--><g class="link" data-entity-1="S2" data-entity-2="ENC2" data-source-line="33" data-uid="lnk20" id="link_S2_ENC2"><path d="M217.6478,134.9523 C244.9378,151.2923 287.03,176.5 317.9,194.98" fill="none" id="S2-backto-ENC2" style="stroke:#800080;stroke-width:1;"></path><polygon fill="#800080" points="212.5,131.87,218.1668,139.9252,216.7898,134.4385,222.2765,133.0615,212.5,131.87" style="stroke:#800080;stroke-width:1;"></polygon></g><!--link S1 to S2--><!--link POH to ENC1--><!--link ENC1 to ENC2--><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194.6191" x="132.5752" y="252.3184">図８： Fast Proof of Replication</text><!--SRC=[bPAnRjim48PtFWMX39s2L9eT0tKGrqCS2qc03d672taM2JCaGT90bI9JNw9e7wDZypP5vxn2IKfHbS8UIWW4UFVTJzv_Oc23D9eMlx__U7xw-lpqZSx11rexOpOqVbTebMIGe89CV6WLJcbS96q2Fq4Jgp_dKreBu-I3qG7KEoKRVOywK1OtT1bvp3i3nqSryyXVomUaPJN4Pi2sxvtPQNvcb74qED3UWejI0tCXDTu8oROQlQTlNyMxgZiLPORu4bmZzGYiWNEfcpxoI2OdNN-4lBaq78b35a0t2caHxGW51K-lLgiRUdGX6n5ggRTZnWl8o7L9ZsgmqC878UrUedf5lDXOr6QnrWAyo5IzMlGtpTGE_rAecMjjGBxM74AdU7vvLluFN8tXF8-YysIoCMbaoRxJmkwSLLXCVttv6VtdvfxUjG4zzQXYKyZfniLO41YTDcmxEKd5qxNU8pMN3cSk3Ykh3R_NGlfWN4jJqtrvLvmVkZnVhaf2eg77EtiRNcPzMduydkP9aEZaeLIoRqykJMTup46e6aFPt0DIdKKaMtf0g4TI5ovvVYiavwYxTFU2V-FfnlxQFQcA_040]--></g></svg></p><h3 id="63-verification">6.3 Verification </h3>
<p>N 個のコアがある場合、各コアはそれぞれのリプリケーション・アイデンティティの暗号化処理をストリーミング実行できる。</p>
<p>必要な総ストレージ容量は <code>2 × ブロック数 × Nコア分</code>となる。
これは、次のブロックを暗号化するためには、前の暗号化済みブロックが必要であるためである。</p>
<p>各コアは、現在の暗号化ブロックから導かれるすべての証明（proof）を生成するために使用可能となる。</p>
<p>証明の検証にかかる時間は、暗号化にかかる時間とほぼ等しいと予測されている。</p>
<p>証明自体は、ブロックから少量のランダムバイトしか使用しないため、ハッシュ化するデータ量は暗号化ブロックサイズよりも大幅に少ない。</p>
<p>同時に検証可能なリプリケーション・アイデンティティの数は、利用可能なコア数に等しい。
現代の GPU は、3500 コア以上を搭載しており、そのクロックスピードは CPU のおよそ 1/2〜1/3 程度である。</p>
<h3 id="64-キーのローテーションkey-rotation">6.4 キーのローテーション（Key Rotation） </h3>
<p>キーのローテーションを行わない場合、<br>
同じ暗号化レプリケーションから、複数の Proof of History シーケンスに対して安価な証明（proof）を生成できてしまう可能性がある。</p>
<p>そのため、キーは定期的にローテーション（更新）され、<br>
各レプリケーションは、新たな Proof of History シーケンスに結びついた新しい鍵で再暗号化される。</p>
<p>ただし、ローテーションはGPU ハードウェア上での検証が現実的に可能となる程度に<br>
十分ゆっくり行う必要がある。<br>
これは、GPU は CPU よりもコア単体あたりの処理速度が遅いためである。</p>
<h3 id="65-ハッシュの選択hash-selection">6.5 ハッシュの選択（Hash Selection） </h3>
<p>Proof of History 生成器は、ネットワーク全体が使用するための ハッシュ値を公開する。<br>
このハッシュは、以下の目的で使用される：</p>
<ul>
<li>Proof of Replication を暗号化するための鍵</li>
<li>高速な証明（fast proof）におけるバイト選択のための疑似乱数生成器のシード</li>
</ul>
<p>このハッシュは、データセットの暗号化にかかる時間のおよそ1/2 に相当する周期ごとにPoH シーケンス上で公開される。</p>
<p>すべてのレプリケーション・アイデンティティは、この同じハッシュを使用し、署名されたハッシュの結果をシード（または暗号鍵）として利用する必要がある。</p>
<p>各リプリケータが証明を提出しなければならない周期（証明周期）は、暗号化にかかる時間よりも短く設定されなければならない。<br>
さもなければ、リプリケータは暗号化をストリーミング処理して、証明ごとにデータを削除することが可能になってしまう。</p>
<p>悪意ある PoH 生成器は、このハッシュより前に特定のデータをシーケンスに挿入することで、望んだハッシュを生成することができてしまう可能性がある。</p>
<p>この攻撃については、セクション 5.13.2 にてさらに詳しく議論されている。</p>
<h3 id="66-証明の検証proof-validation">6.6 証明の検証（Proof Validation） </h3>
<p>Proof of History ノードは、提出された Proof of Replication の検証を行うことは想定されていない。<br>
その代わりに、PoH ノードは、各リプリケータのアイデンティティごとに、未検証の証明と検証済みの証明の件数を記録・管理することが期待されている。</p>
<p>ある証明（proof）は、ネットワーク内のスーパーマジョリティのバリデーターによって署名されたときに検証済みと見なされる。</p>
<p>この検証署名は、リプリケータが p2p ゴシップネットワークを介して収集し、ネットワーク内のスーパーマジョリティのバリデーターによる署名を含む1つのパケットとして提出される。</p>
<p>このパケットは、Proof of History シーケンスで生成された特定のハッシュ以前のすべての証明を検証済みとするものであり、複数のリプリケータのアイデンティティを同時に含めることができる。</p>
<h3 id="67-attacks">6.7 Attacks </h3>
<h4 id="671-スパムspam">6.7.1 スパム（Spam） </h4>
<p>悪意あるユーザーは、多数のリプリケータ・アイデンティティを作成し、不正な証明（bad proofs）でネットワークにスパムを仕掛ける可能性がある。</p>
<p>これに対処するため、検証を要求する際には、各ノードが暗号化されたデータ全体とマークルツリー全体をネットワークに提供することが求められる。</p>
<p>本論文で設計されている Proof of Replication は、追加の証明に対して安価な検証が可能であり、追加のストレージを必要としない。</p>
<p>しかし、各アイデンティティは暗号化において 1 コア分の処理時間を消費するため、リプリケーションの対象（replication target）は、使用可能なコア数を上限として設定されるべきである。</p>
<p>現代の GPU には、3500コア以上が搭載されている。</p>
<h4 id="672-部分消去partial-erasure">6.7.2 部分消去（Partial Erasure） </h4>
<p>リプリケータノードは、状態全体を保存せずに済ませるために、一部のデータを意図的に消去（部分消去）しようとする可能性がある。
しかし、証明の回数とシードのランダム性によって、この攻撃は非常に困難になる。
たとえば、1テラバイトのデータを保持しているユーザーが、各 1メガバイトブロックから 1バイトだけを削除するとする。</p>
<p>このとき、各証明が 1 メガバイトごとに 1 バイトをサンプリングすると仮定すると、
削除されたバイトにヒットする確率は以下のように計算される：</p>
<ul>
<li>
<p>1 回の証明で検出される確率：
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mstyle displaystyle="true" scriptlevel="0"><mfrac><mn>1</mn><mrow><mn>1</mn><mo separator="true">,</mo><mn>000</mn><mo separator="true">,</mo><mn>000</mn></mrow></mfrac></mstyle><msup><mo stretchy="false">)</mo><mrow><mn>1</mn><mo separator="true">,</mo><mn>000</mn><mo separator="true">,</mo><mn>000</mn></mrow></msup><mo>≈</mo><mn>0.63</mn></mrow><annotation encoding="application/x-tex">1 - (1 - \cfrac{1}{1,000,000})^{1,000,000} \approx 0.63</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.4704em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.59em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.74em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">000</span><span class="mpunct mtight">,</span><span class="mord mtight">000</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.63</span></span></span></span></p>
</li>
<li>
<p>5 回の証明を行った場合、少なくとも 1 回は検出される確率： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.99</mn></mrow><annotation encoding="application/x-tex">0.99</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.99</span></span></span></span></p>
</li>
</ul>
<p>したがって、ごくわずかな部分的な削除でも、複数回の証明によって高い確率で検出されることになる。</p>
<h3 id="673-poh-生成器との共謀collusion-with-poh-generator">6.7.3 PoH 生成器との共謀（Collusion with PoH generator） </h3>
<p>署名されたハッシュは、サンプル抽出（sample）に使用するシードとして利用されることが想定されている。
もしリプリケータが事前に特定のハッシュを選択できるとしたら、
サンプリング対象とならないすべてのバイトを消去することが可能になる。</p>
<p>PoH 生成器と共謀しているリプリケータ・アイデンティティは、ランダムバイト選択用に事前定義されたハッシュが生成される直前に、
シーケンスの末尾に特定のトランザクションを挿入することができる。</p>
<p>十分なコア数があれば、攻撃者はリプリケータにとって都合の良いハッシュを生成できる可能性がある。</p>
<p>ただし、この攻撃は単一のリプリケータ・アイデンティティのみに利益をもたらす。
すべてのアイデンティティは、同じ暗号学的に署名されたハッシュ（例：ECDSA）を使用する必要があり、
その署名は各リプリケータごとに一意で衝突耐性がある。</p>
<p>したがって、単一のリプリケータが得られる利益はごくわずかにとどまる。</p>
<h4 id="674-サービス拒否denial-of-service">6.7.4 サービス拒否（Denial of Service） </h4>
<p>新たなリプリケータ・アイデンティティを追加するコストは、ストレージコストと等しいと想定されている。
また、すべてのリプリケータ・アイデンティティを検証するために必要な計算能力のコストは、リプリケーションごとに CPU または GPU の 1 コア分に相当する。</p>
<p>このことにより、多数の有効なリプリケータ・アイデンティティを作成することでネットワークにサービス拒否（DoS）攻撃を仕掛ける機会が生じる可能性がある。</p>
<p>この攻撃を制限するために、ネットワークで選択されるコンセンサスプロトコルは、リプリケーション対象（replication target）を選定し、ネットワーク上での可用性、帯域幅、地理的位置（geolocation）などの望ましい特性を満たすリプリケーション証明に報酬を与えることができる。</p>
<h4 id="675-コモンズの悲劇tragedy-of-commons">6.7.5 コモンズの悲劇（Tragedy of Commons） </h4>
<p>PoS 検証者（verifiers）は、実際には何の作業も行わずに PoRep（Proof of Replication）を単に確認（confirm）してしまう可能性がある。</p>
<p>この問題を防ぐために、PoS 検証者が実際に作業を行うような経済的インセンティブを設計する必要がある。たとえば、マイニング報酬を PoS 検証者と PoRep のリプリケーションノードとで分配するなどが挙げられる。</p>
<p>このシナリオをさらに回避する手段として、PoRep 検証者自身が一定の確率で「偽の証明（false proof）」を意図的に提出することが考えられる。そして、その偽の証明が偽であることを、データを生成した関数を示すことで証明する。</p>
<p>このとき、偽の証明を承認してしまった PoS 検証者はスラッシュ（slashing）の対象となる。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="447px" preserveAspectRatio="none" style="width:643px;height:447px;background:#FFFFFF;" version="1.1" viewBox="0 0 643 447" width="643px" zoomAndPan="magnify"><defs></defs><g><g class="cluster" data-entity="##2" data-source-line="21" data-uid="ent0003" id="cluster_##2"><polygon fill="none" points="16,30.5,26,20.5,320,20.5,320,85.5,310,95.5,16,95.5,16,30.5"></polygon><line x1="310" x2="320" y1="30.5" y2="20.5"></line><line x1="16" x2="310" y1="30.5" y2="30.5"></line><line x1="310" x2="310" y1="30.5" y2="95.5"></line></g><g class="cluster" data-entity="##7" data-source-line="26" data-uid="ent0008" id="cluster_##7"><polygon fill="none" points="307,163,317,153,387,153,387,397,377,407,307,407,307,163"></polygon><line x1="377" x2="387" y1="163" y2="153"></line><line x1="307" x2="377" y1="163" y2="163"></line><line x1="377" x2="377" y1="163" y2="407"></line></g><!--entity V1--><g class="entity" data-entity="V1" data-source-line="22" data-uid="ent0004" id="entity_V1"><path d="M236.5,46.5 C236.5,36.5 270.0293,36.5 270.0293,36.5 C270.0293,36.5 303.5586,36.5 303.5586,46.5 L303.5586,69.5 C303.5586,79.5 270.0293,79.5 270.0293,79.5 C270.0293,79.5 236.5,79.5 236.5,69.5 L236.5,46.5" fill="#FFEFD5" style="stroke:#181818;stroke-width:0.5;"></path><path d="M236.5,46.5 C236.5,56.5 270.0293,56.5 270.0293,56.5 C270.0293,56.5 303.5586,56.5 303.5586,46.5" fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0586" x="246.5" y="72.8184">Verifier</text></g><!--entity V2--><g class="entity" data-entity="V2" data-source-line="23" data-uid="ent0005" id="entity_V2"><path d="M32.5,46.5 C32.5,36.5 66.0293,36.5 66.0293,36.5 C66.0293,36.5 99.5586,36.5 99.5586,46.5 L99.5586,69.5 C99.5586,79.5 66.0293,79.5 66.0293,79.5 C66.0293,79.5 32.5,79.5 32.5,69.5 L32.5,46.5" fill="#FFEFD5" style="stroke:#181818;stroke-width:0.5;"></path><path d="M32.5,46.5 C32.5,56.5 66.0293,56.5 66.0293,56.5 C66.0293,56.5 99.5586,56.5 99.5586,46.5" fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0586" x="42.5" y="72.8184">Verifier</text></g><!--entity V3--><g class="entity" data-entity="V3" data-source-line="24" data-uid="ent0006" id="entity_V3"><path d="M134.5,46.5 C134.5,36.5 168.0293,36.5 168.0293,36.5 C168.0293,36.5 201.5586,36.5 201.5586,46.5 L201.5586,69.5 C201.5586,79.5 168.0293,79.5 168.0293,79.5 C168.0293,79.5 134.5,79.5 134.5,69.5 L134.5,46.5" fill="#FFEFD5" style="stroke:#181818;stroke-width:0.5;"></path><path d="M134.5,46.5 C134.5,56.5 168.0293,56.5 168.0293,56.5 C168.0293,56.5 201.5586,56.5 201.5586,46.5" fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0586" x="144.5" y="72.8184">Verifier</text></g><!--entity U1--><g class="entity" data-entity="U1" data-source-line="27" data-uid="ent0009" id="entity_U1"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48.0684" x="323" y="169"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.0684" x="333" y="191.3184">user</text></g><!--entity U2--><g class="entity" data-entity="U2" data-source-line="28" data-uid="ent0010" id="entity_U2"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48.0684" x="323" y="263"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.0684" x="333" y="285.3184">user</text></g><!--entity U3--><g class="entity" data-entity="U3" data-source-line="29" data-uid="ent0011" id="entity_U3"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48.0684" x="323" y="357"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.0684" x="333" y="379.3184">user</text></g><!--entity GEN--><g class="entity" data-entity="GEN" data-source-line="33" data-uid="ent0012" id="entity_GEN"><polygon fill="#FFB6C1" points="550.5,374,517.25,362,450.75,362,417.5,374,450.75,386,517.25,386,550.5,374" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2881" x="450.644" y="379.3184">Generator</text></g><!--entity MEMO1--><g class="entity" data-entity="MEMO1" data-source-line="35" data-uid="ent0013" id="entity_MEMO1"><rect fill="none" height="102" rx="2.5" ry="2.5" width="257.2695" x="338.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90.3574" x="367.9414" y="20.5586">・Generator:PoH</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72.6504" x="367.9414" y="32.5586">・Verifier:PoR</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="348.5" y="44.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#B22222" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="152.5195" x="367.9414" y="44.5586">・Inbound user transactions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="348.5" y="56.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#F4A460" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="208.8164" x="367.9414" y="56.5586">・Stripped traffic from Loom to Spools</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="348.5" y="68.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#008080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107.5898" x="367.9414" y="68.5586">・P2P Verifier traffic</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="348.5" y="80.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#4682B4" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="190.3125" x="367.9414" y="80.5586">・Replicated blockchain broadcast</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="348.5" y="92.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#800080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="217.8281" x="367.9414" y="92.5586">・random bytes selected from the block</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="348.5" y="104.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#B22222" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.9473" x="367.9414" y="104.5586">・Proof of History hash</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="490.8887" y="104.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text></g><!--link U1 to U2--><!--link U2 to U3--><!--link V2 to V3--><g class="link" data-entity-1="V2" data-entity-2="V3" data-source-line="49" data-uid="lnk16" id="link_V2_V3"><path d="M105.87,58 C117.4,58 116.93,58 128.47,58" fill="none" id="V2-V3" style="stroke:#008080;stroke-width:1;"></path><polygon fill="#008080" points="99.87,58,108.87,62,104.87,58,108.87,54,99.87,58" style="stroke:#008080;stroke-width:1;"></polygon><polygon fill="#008080" points="134.47,58,125.47,54,129.47,58,125.47,62,134.47,58" style="stroke:#008080;stroke-width:1;"></polygon></g><!--link V3 to V1--><g class="link" data-entity-1="V3" data-entity-2="V1" data-source-line="50" data-uid="lnk17" id="link_V3_V1"><path d="M207.87,58 C219.4,58 218.93,58 230.47,58" fill="none" id="V3-V1" style="stroke:#008080;stroke-width:1;"></path><polygon fill="#008080" points="201.87,58,210.87,62,206.87,58,210.87,54,201.87,58" style="stroke:#008080;stroke-width:1;"></polygon><polygon fill="#008080" points="236.47,58,227.47,54,231.47,58,227.47,62,236.47,58" style="stroke:#008080;stroke-width:1;"></polygon></g><!--link V1 to U1--><g class="link" data-entity-1="V1" data-entity-2="U1" data-source-line="52" data-uid="lnk18" id="link_V1_U1"><path d="M282.54,79.52 C297.8,104.49 320.1015,140.9902 334.0215,163.7702" fill="none" id="V1-to-U1" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="337.15,168.89,335.8704,159.1246,334.5429,164.6235,329.044,163.296,337.15,168.89" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--link V1 to U2--><g class="link" data-entity-1="V1" data-entity-2="U2" data-source-line="53" data-uid="lnk19" id="link_V1_U2"><path d="M273.46,79.53 C278.61,107.91 289.51,160.47 306,203 C314.4,224.67 324.5354,242.8378 333.6854,257.8378" fill="none" id="V1-to-U2" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="336.81,262.96,335.538,253.1936,334.2062,258.6915,328.7084,257.3597,336.81,262.96" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--link V1 to U3--><g class="link" data-entity-1="V1" data-entity-2="U3" data-source-line="54" data-uid="lnk20" id="link_V1_U3"><path d="M270.14,79.66 C270.62,107.77 272.56,159.53 280,203 C287.32,245.72 289.83,256.78 306,297 C314.67,318.56 324.7715,336.732 333.8415,351.772" fill="none" id="V1-to-U3" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="336.94,356.91,335.7176,347.1373,334.3579,352.6283,328.8669,351.2687,336.94,356.91" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--link V2 to U2--><g class="link" data-entity-1="V2" data-entity-2="U2" data-source-line="56" data-uid="lnk21" id="link_V2_U2"><path d="M85.74,79.62 C94.95,88.91 106.24,99.83 117,109 C188.6,170.05 275.2655,230.5004 318.0355,259.5304" fill="none" id="V2-to-U2" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="323,262.9,317.7997,254.536,318.863,260.092,313.3069,261.1552,323,262.9" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--link V2 to U3--><g class="link" data-entity-1="V2" data-entity-2="U3" data-source-line="57" data-uid="lnk22" id="link_V2_U3"><path d="M76.84,79.67 C92.53,108.69 123.39,162.48 157,203 C196.15,250.2 212.23,256.19 258,297 C281.66,318.09 304.9317,337.8457 323.1017,353.0757" fill="none" id="V2-to-U3" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="327.7,356.93,323.3721,348.083,323.8681,353.7181,318.233,354.2141,327.7,356.93" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--link V3 to U3--><g class="link" data-entity-1="V3" data-entity-2="U3" data-source-line="59" data-uid="lnk23" id="link_V3_U3"><path d="M176.24,79.58 C193.57,121.89 236.26,221.05 285,297 C299.16,319.07 314.7089,337.6278 328.0489,352.4678" fill="none" id="V3-to-U3" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="332.06,356.93,329.0181,347.5627,328.7174,353.2115,323.0685,352.9109,332.06,356.93" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--reverse link V1 to GEN--><g class="link" data-entity-1="V1" data-entity-2="GEN" data-source-line="61" data-uid="lnk25" id="link_V1_GEN"><path d="M289.3678,84.0843 C298.4978,94.6743 307.07,102.21 321,109 C375.6,135.63 551.97,99.3 592,145 C636.51,195.82 623.12,237.04 592,297 C575.52,328.74 539.02,350.02 513.02,361.8" fill="none" id="V1-backto-GEN" style="stroke:#F4A460;stroke-width:1;"></path><polygon fill="#F4A460" points="285.45,79.54,288.2972,88.9683,288.7148,83.3269,294.3563,83.7446,285.45,79.54" style="stroke:#F4A460;stroke-width:1;"></polygon></g><!--reverse link V2 to GEN--><g class="link" data-entity-1="V2" data-entity-2="GEN" data-source-line="62" data-uid="lnk27" id="link_V2_GEN"><path d="M85.3724,84.0804 C94.5124,94.6604 103.07,102.2 117,109 C225.8,162.1 289.69,72.99 387,145 C461.52,200.14 479.31,324.01 483.08,361.83" fill="none" id="V2-backto-GEN" style="stroke:#F4A460;stroke-width:1;"></path><polygon fill="#F4A460" points="81.45,79.54,84.3067,88.9655,84.7187,83.3236,90.3605,83.7356,81.45,79.54" style="stroke:#F4A460;stroke-width:1;"></polygon></g><!--reverse link V3 to GEN--><g class="link" data-entity-1="V3" data-entity-2="GEN" data-source-line="63" data-uid="lnk29" id="link_V3_GEN"><path d="M187.3311,84.1601 C196.4511,94.7701 205.02,102.3 219,109 C279.94,138.22 476.13,94.46 521,145 C577.98,209.17 513.84,325.38 491.26,361.78" fill="none" id="V3-backto-GEN" style="stroke:#F4A460;stroke-width:1;"></path><polygon fill="#F4A460" points="183.42,79.61,186.2533,89.0425,186.6793,83.4017,192.32,83.8277,183.42,79.61" style="stroke:#F4A460;stroke-width:1;"></polygon></g><!--link U1 to GEN--><g class="link" data-entity-1="U1" data-entity-2="GEN" data-source-line="64" data-uid="lnk30" id="link_U1_GEN"><path d="M358.92,203.18 C386.13,240.13 448.7225,325.0984 472.0925,356.8384" fill="none" id="U1-to-GEN" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="475.65,361.67,473.5348,352.051,472.6854,357.6437,467.0927,356.7943,475.65,361.67" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link U2 to GEN--><g class="link" data-entity-1="U2" data-entity-2="GEN" data-source-line="65" data-uid="lnk31" id="link_U2_GEN"><path d="M370.86,297.03 C398.46,315.56 438.1992,342.2447 462.3192,358.4447" fill="none" id="U2-to-GEN" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="467.3,361.79,462.059,353.4514,463.1493,359.0022,457.5985,360.0926,467.3,361.79" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link U3 to GEN--><g class="link" data-entity-1="U3" data-entity-2="GEN" data-source-line="66" data-uid="lnk32" id="link_U3_GEN"><path d="M371.08,374 C386.52,374 395.96,374 411.4,374" fill="none" id="U3-to-GEN" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="417.4,374,408.4,370,412.4,374,408.4,378,417.4,374" style="stroke:#B22222;stroke-width:1;"></polygon></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165.2246" x="232.1427" y="436.3184">図９： System Architecture</text><!--SRC=[fLF1RXCn4BtxAwpbm2agsRsXD5A3sWQfBQkcb4FXCB4dMIkElR8TGOfwuYiAdy6H_WtYt5zWl9lT9a2YIAmYQpNpvkNvpLi1PL3MyEJNj- -F3_UF3r_vQEa3plcH4uKAACB2OS9wFYmrzZazB1x6IlnSlSLd069swkp2o5TMMyU30-DBS6X2YpbJ1gyA9MO6lUSlglfTTHRu2QQauOblQ9swjIQ0Fj9gQkR4mmKTwDR613YvDdD2-96wHTvD_rjNKw-dnffeslevkAaoQy0Sf5HcsbwfTr1xnTZp2tA9HQluIgY406Fmo9DhT6gYq2KSFB_kycSvbB24TuKgToBJlP7P1l9kGuUZlOAPQXfQ-DN0Mn9nfgP56EW5RaUbUw6oTTGTOwnPSdAA1Xq4MmDFZozMo5oP6MFLKfFQs9zVVhJWbxaTlZTjlRafbI-RSczYOqpYoWwJ4-Lmu6YhIP_WhyquXe17VNK8GCJO-zv17Eh_as84HYu7pduq5SSeE5MMAEFyPA84dpWxvsUMZc3vgBHMxwIxGj0LKPxclD7VaEtK4H1rzB6QliHIAm61X8or5JDH0ALnx2n80Jxi8YeNhjGr2raWIVXu6T1pZvfMI8JLZKA1DVCkgarxSsVjXDDlg3pjQiaByCLgl1wkTdr-VFwconZbh2F9rPj2IOdcGwTFeMAKgx-g6MEKzrx7nNpSXEOZFUp6Rintz9JHopP8TmLXryr__e68cM_ztOvAzq9bwwYeV1-oT3-oR2zO_9ewYt9rzQS0hpVIROrien6tL9bAhUeZRLTUhMfRAzlQ-Wq0]--></g></svg></p><h2 id="7-system-architecture">7 System Architecture </h2>
<h3 id="71-components">7.1 Components </h3>
<h4 id="711-リーダーleader-proof-of-history-生成器">7.1.1 リーダー（Leader）, Proof of History 生成器 </h4>
<p>リーダーとは、選出された Proof of History（PoH）生成器である。</p>
<p>リーダーは、任意のユーザートランザクションを受け取り、それらすべてのトランザクションに対してユニークでグローバルな順序を保証するPoH シーケンスを出力する。
各トランザクションのバッチ処理の後、リーダーは その順序でトランザクションを実行した結果得られる状態（state）の署名を出力する。この署名は、リーダーのアイデンティティで署名される。</p>
<h4 id="712-状態state">7.1.2 状態（State） </h4>
<p>状態は、ユーザーのアドレスをインデックスとした単純なハッシュテーブル（naive hash table） として構成されている。
各セル（cell）には、完全なユーザーアドレスと、この計算に必要なメモリが格納される。</p>
<p>たとえば、トランザクションテーブル（Transaction table）には以下が含まれる：</p>
<p><strong>Transaction table contains :</strong></p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>0                                159        223     255
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━┓
┃ Ripemd of Users Public Key      ┃ Account  ┃ unused ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┻━━━━━━━━━━┻━━━━━━━━┛
</code></pre><p>For a total of 32 bytes</p>
<p><strong>Proof of Stake bonds table contains :</strong></p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>0               63               159        223     255
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━┓
┃ Ripemd of Users Public Key      ┃ Account  ┃ unused ┃
┣━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┻━━━━━━━━━━┻━━━━━━━━┛
┃ Last Vote     ┃
┣━━━━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ unused                                              ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre><p>For a total of 64 bytes</p>
<h4 id="713-検証者verifier-状態のレプリケーションstate-replication">7.1.3 検証者（Verifier）, 状態のレプリケーション（State Replication） </h4>
<p>検証者ノード（Verifier nodes）は、ブロックチェーンの状態をレプリケーションし、その高可用性（high availability）を提供する役割を担う。</p>
<p>レプリケーション対象（replication target）はコンセンサスアルゴリズムによって選定される。
また、コンセンサスアルゴリズム内のバリデーターたちは、オフチェーンで定義された基準に基づき、承認する Proof of Replication ノードを選定・投票する。</p>
<p>ネットワークは、次のような構成が可能である：</p>
<ul>
<li>Proof of Stake ボンドの最小額を設定する</li>
<li>各ボンドにつき、1つのリプリケータ・アイデンティティのみを許可する</li>
</ul>
<h4 id="714-バリデーターvalidators">7.1.4 バリデーター（Validators） </h4>
<p>これらのノードは、検証者（Verifiers）からの帯域（bandwidth）を消費する。
バリデーターは仮想ノード（virtual nodes）であり、以下のいずれの構成でも動作可能である：</p>
<ul>
<li>検証者ノード（Verifiers）と同一のマシン上</li>
<li>リーダー（Leader）と同一のマシン上</li>
<li>または、このネットワークのコンセンサスアルゴリズム専用に構成された別のマシン上</li>
</ul>
<h2 id="72-ネットワークの限界network-limits">7.2 ネットワークの限界（Network Limits） </h2>
<p>リーダー（Leader）は、ユーザーからのパケットを受信し、最も効率的な方法で順序付けを行い、
それらを Proof of History シーケンスとして整列・発行することが期待されている。
この PoH シーケンスは、下流の検証者（Verifiers）へ公開される。</p>
<p>この「効率性」は、トランザクションのメモリアクセスパターンに基づいており、
トランザクションは以下を最大化・最小化するように並べられる：</p>
<ul>
<li>ページフォールトの最小化</li>
<li>プリフェッチ（事前読み込み）の最大化</li>
</ul>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="242px" preserveAspectRatio="none" style="width:432px;height:242px;background:#FFFFFF;" version="1.1" viewBox="0 0 432 242" width="432px" zoomAndPan="magnify"><defs></defs><g><!--entity GEN--><g class="entity" data-entity="GEN" data-source-line="22" data-uid="ent0002" id="entity_GEN"><polygon fill="#FFB6C1" points="195.5,121,162.25,109,95.75,109,62.5,121,95.75,133,162.25,133,195.5,121" style="stroke:#181818;stroke-width:0.5;"></polygon><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2881" x="95.644" y="126.3184">Generator</text></g><!--entity O1--><g class="entity" data-entity="O1" data-source-line="23" data-uid="ent0003" id="entity_O1"><rect fill="none" height="20" rx="2.5" ry="2.5" width="20" x="174" y="18"></rect></g><!--entity O2--><g class="entity" data-entity="O2" data-source-line="24" data-uid="ent0004" id="entity_O2"><rect fill="none" height="20" rx="2.5" ry="2.5" width="20" x="119" y="18"></rect></g><!--entity O3--><g class="entity" data-entity="O3" data-source-line="25" data-uid="ent0005" id="entity_O3"><rect fill="none" height="20" rx="2.5" ry="2.5" width="20" x="64" y="18"></rect></g><!--entity I1--><g class="entity" data-entity="I1" data-source-line="26" data-uid="ent0006" id="entity_I1"><rect fill="none" height="20" rx="2.5" ry="2.5" width="20" x="7" y="111"></rect></g><!--entity I2--><g class="entity" data-entity="I2" data-source-line="27" data-uid="ent0007" id="entity_I2"><rect fill="none" height="20" rx="2.5" ry="2.5" width="20" x="63" y="193"></rect></g><!--entity MEMO1--><g class="entity" data-entity="MEMO1" data-source-line="29" data-uid="ent0008" id="entity_MEMO1"><rect fill="none" height="42" rx="2.5" ry="2.5" width="196.7773" x="229.5" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="239.5" y="20.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#B22222" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="152.5195" x="258.9414" y="20.5586">・Inbound user transactions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="239.5" y="32.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text><text fill="#F4A460" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157.3359" x="258.9414" y="32.5586">・Outgoing traffic to Verifiers</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="19.4414" x="239.5" y="44.5586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text></g><!--reverse link O1 to GEN--><g class="link" data-entity-1="O1" data-entity-2="GEN" data-source-line="34" data-uid="lnk10" id="link_O1_GEN"><path d="M175.4254,43.1944 C165.3154,59.9144 146.85,90.46 135.82,108.72" fill="none" id="O1-backto-GEN" style="stroke:#F4A460;stroke-width:1;"></path><polygon fill="#F4A460" points="178.53,38.06,170.4502,43.6918,175.9429,42.3386,177.2961,47.8313,178.53,38.06" style="stroke:#F4A460;stroke-width:1;"></polygon></g><!--reverse link O2 to GEN--><g class="link" data-entity-1="O2" data-entity-2="GEN" data-source-line="35" data-uid="lnk12" id="link_O2_GEN"><path d="M129,44.06 C129,60.78 129,90.46 129,108.72" fill="none" id="O2-backto-GEN" style="stroke:#F4A460;stroke-width:1;"></path><polygon fill="#F4A460" points="129,38.06,125,47.06,129,43.06,133,47.06,129,38.06" style="stroke:#F4A460;stroke-width:1;"></polygon></g><!--reverse link O3 to GEN--><g class="link" data-entity-1="O3" data-entity-2="GEN" data-source-line="36" data-uid="lnk14" id="link_O3_GEN"><path d="M82.5746,43.1944 C92.6846,59.9144 111.15,90.46 122.18,108.72" fill="none" id="O3-backto-GEN" style="stroke:#F4A460;stroke-width:1;"></path><polygon fill="#F4A460" points="79.47,38.06,80.7039,47.8313,82.0571,42.3386,87.5498,43.6918,79.47,38.06" style="stroke:#F4A460;stroke-width:1;"></polygon></g><!--link I1 to GEN--><g class="link" data-entity-1="I1" data-entity-2="GEN" data-source-line="38" data-uid="lnk15" id="link_I1_GEN"><path d="M27.06,121 C38.74,121 44.42,121 56.1,121" fill="none" id="I1-to-GEN" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="62.1,121,53.1,117,57.1,121,53.1,125,62.1,121" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--reverse link GEN to I2--><g class="link" data-entity-1="GEN" data-entity-2="I2" data-source-line="39" data-uid="lnk17" id="link_GEN_I2"><path d="M117.769,138.0352 C106.589,154.0052 89.65,178.22 79.34,192.95" fill="none" id="GEN-backto-I2" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="121.21,133.12,112.7717,138.1989,118.3425,137.216,119.3254,142.7869,121.21,133.12" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link I1 to I2--><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202.5488" x="107.8643" y="231.3184">図１０： Generator network limits</text><!--SRC=[hP8zJiD048NxFSN855GHnBGX4a4GB2M01A81YiKxSKPnPgFnHlo9YWj02yUW9BT1rBa2kmwO086ABLRoctblPpuvrID7bY5wVNoQJkwdaxlfv07Qo2ZQMG56Tsvb03aDoHMHQXJkCiSc-AF29PWwpLcEr-LdE2sT3jfYnsmsRUuZd6WkHbgGNTNJ8SR3FgK3ngA0rJ_rc_BkuuNE_A2Vx-nOeIlBJkSREMKyzFcG-WjbpfPgCNEURTz_G5S8zVZVvfsvpd8VK-bTBHdnNEE-DeOugrPghCn0AhMyQmsgZ_MY2dq4ke3srYuiTIZhkttYWQfeGmHbVQ- -G8iNQ6i_jMI1DucLAf55ix4RFHkeXWtNesqIR8c743LVRfyJFWlCO5pWEpETXb-fQAm4K_E45qGSQ3QNBR7dN6RiZLrc0nRlx_Ke1MVX28LwXF8zfvolkzNrAwk0fJOUrPeU02nzXiuNujyAQryAAgb3JG9XNojnLskg97xtVDUznNZpSP-CGJxr7HxS6m00]--></g></svg></p><p><strong>受信パケットの形式 :</strong></p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>0               63               159        223          255
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━┳━━━━┓      ┓
┃ Last Valid Hash                 ┃ Counter  ┃ u  ┃ S  ┃      ┃
┣━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┻━━━━━━━━━━┻━━━━┻━━━━┛      ┃
┃ Fee           ┃                                             ┣ Signed
┣━━━━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓   ┃
┃ From                                                    ┃   ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛   ┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Signature 1 of 2                                        ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃ Signature 2 of 2                                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre><p>Size 20 + 8 + 16 + 8 + 32 + 3232 = 148 bytes</p>
<p><strong>サポート可能な最小のペイロードは、1つの宛先アカウント（destination account）</strong></p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>0            63           127    159        223          255
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━┳━━━━┓
┃ Last Valid Hash                 ┃ Counter  ┃ u  ┃ S  ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╋━━━━━━━━━━╋━━━━┻━━━━┛      ┓
┃ To                              ┃ Amount   ┃                ┃
┣━━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━┻━━━━━━━━━━┛                ┃
┃ From        ┃            ┃                                  ┣ Signed
┣━━━━━━━━━━━━━┻━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  ┃
┃ From                                                     ┃  ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  ┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Signature 1 of 2                                        ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃ Signature 2 of 2                                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre><p>ペイロードの最小サイズ : 176 bytes</p>
<p><strong>Proof of History（PoH）シーケンスパケット</strong></p>
<p>以下の情報が含まれている：</p>
<ul>
<li>現在のハッシュ（current hash）</li>
<li>カウンター（counter）</li>
<li>PoH シーケンスに追加されたすべての新しいメッセージのハッシュ</li>
<li>それらのメッセージを処理した後の状態署名（state signature）</li>
</ul>
<p>このパケットは、N 個のメッセージがブロードキャストされるごとに 1 回送信される。</p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>0            63           127    159        223          255
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━┓
┃ Current Hash                    ┃ Counter  ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╋━━━━━━━━━━┛                ┓
┃ Messages Hash                   ┃                           ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫                           ┣ Signed
┃ State Hash                      ┃                           ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛                           ┛
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Signature 1 of 2                                        ┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃ Signature 2 of 2                                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre><p>出力パケットの最小サイズ : 132 bytes</p>
<p>1Gbpsのネットワーク接続において、可能な最大トランザクション数は
1ギガビット毎秒 ÷ 176バイト = 最大約71万トランザクション毎秒（tps） となる。</p>
<p>イーサネットフレーミングの影響により、1〜4%の損失が生じることが予想される。</p>
<p>ネットワークの目標使用量を上回る余剰帯域は、Reed-Solomon符号で出力を符号化し、利用可能な下流の検証者（Verifiers）にストライピング（分散）して送信することで、可用性の向上に利用できる。</p>
<h3 id="73-計算上の限界computational-limits">7.3 計算上の限界（Computational Limits） </h3>
<p>各トランザクションには、ダイジェストの検証が必要となる。</p>
<p>この処理は、トランザクションメッセージ自体の外部メモリを使用せず、完全に独立して並列化できる。</p>
<p>したがって、スループットは主にシステムに搭載されたCPUコアの数によって制限されると考えられる。</p>
<p>GPUベースのECDSA検証サーバでは、1秒あたり90万件の検証処理という実験結果も報告されている。<a href="#ref-09">[9]</a>。</p>
<h3 id="74-メモリの限界memory-limits">7.4 メモリの限界（Memory Limits） </h3>
<p>状態を、各アカウントに対して32バイトのエントリを持つ、使用率50%のハッシュテーブルとして素朴に実装した場合、理論上は100億アカウントを640GBに格納可能である。</p>
<p>このテーブルへの定常状態でのランダムアクセス性能は、1秒あたり約1,100万回の読み書きとして測定された。</p>
<p>1トランザクションあたり2回の読み取りと2回の書き込みを行うと仮定すると、メモリのスループットとしては1秒あたり275万トランザクションの処理が可能である。</p>
<p>これらの測定は、Amazon Web Services上の1TBメモリを搭載した x1.16xlarge インスタンスで実施された。</p>
<h3 id="75-高性能スマートコントラクトhigh-performance-smart-contracts">7.5 高性能スマートコントラクト（High Performance Smart Contracts） </h3>
<p>スマートコントラクトは、トランザクションの一般化された形である。
これらは各ノード上で実行され、状態を変更するプログラムである。</p>
<p>この設計では、拡張Berkeley Packet Filter（eBPF）のバイトコードをスマートコントラクトの言語として利用しており、高速で解析しやすく、JIT（実行時コンパイル）も可能である。</p>
<p>この方式の主な利点のひとつは、ゼロコストのFFI（外部関数インターフェース）を持つことである。
プラットフォーム上で直接実装されている関数（インストリンシック）は、プログラムから呼び出すことができる。</p>
<p>インストリンシックの呼び出しは、そのプログラムの実行を一時停止させ、高性能なサーバ上でインストリンシックをスケジューリングして実行する。
インストリンシックはバッチ処理され、GPU上で並列実行される。</p>
<p>上記の例では、異なる2つのユーザープログラムが同じインストリンシックを呼び出している。
各プログラムは、インストリンシックのバッチ実行が完了するまで一時停止される。</p>
<p>インストリンシックの一例としては、ECDSA署名の検証がある。
これらの呼び出しをGPUでバッチ処理することで、スループットは数千倍にまで向上する可能性がある。</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="DESCRIPTION" height="371px" preserveAspectRatio="none" style="width:622px;height:371px;background:#FFFFFF;" version="1.1" viewBox="0 0 622 371" width="622px" zoomAndPan="magnify"><defs></defs><g><!--cluster C1--><g class="cluster" data-entity="C1" data-source-line="22" data-uid="ent0002" id="cluster_C1"><rect fill="#D8BFD8" height="99" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="222" x="7" y="85.65"></rect><line style="stroke:#181818;stroke-width:1;" x1="7" x2="229" y1="103.65" y2="103.65"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="106.8799" x="64.5601" y="99.9684">User program 1</text></g><!--cluster C2--><g class="cluster" data-entity="C2" data-source-line="26" data-uid="ent0005" id="cluster_C2"><rect fill="#D8BFD8" height="99" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="222" x="269" y="85.65"></rect><line style="stroke:#181818;stroke-width:1;" x1="269" x2="491" y1="103.65" y2="103.65"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="106.8799" x="326.5601" y="99.9684">User program 2</text></g><!--cluster R--><g class="cluster" data-entity="R" data-source-line="30" data-uid="ent0008" id="cluster_R"><rect fill="#FFEFD5" height="116" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="399" x="217" y="226.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="139.043" x="346.9785" y="240.9684">GPU Intrinsic Server</text></g><!--entity BPF1--><g class="entity" data-entity="BPF1" data-source-line="23" data-uid="ent0003" id="entity_BPF1"><rect fill="#ADD8E6" height="20" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="58.5273" x="50.5" y="133.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.5273" x="60.5" y="148.9684">BPF 1</text></g><!--entity BPFC1--><g class="entity" data-entity="BPFC1" data-source-line="24" data-uid="ent0004" id="entity_BPFC1"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="60.4688" x="145" y="126.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.5273" x="155" y="141.9684">BPF 1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.4688" x="155" y="155.9684">cont...</text></g><!--entity BPF2--><g class="entity" data-entity="BPF2" data-source-line="27" data-uid="ent0006" id="entity_BPF2"><rect fill="#ADD8E6" height="20" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="58.5273" x="312.5" y="133.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.5273" x="322.5" y="148.9684">BPF 2</text></g><!--entity BPFC2--><g class="entity" data-entity="BPFC2" data-source-line="28" data-uid="ent0007" id="entity_BPFC2"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="60.4688" x="407" y="126.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.5273" x="417" y="141.9684">BPF 2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.4688" x="417" y="155.9684">cont...</text></g><g class="entity" data-entity="i1" data-source-line="31" data-uid="ent0009" id="entity_i1"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12.5986" x="228.7007" y="206.9684">i1</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="229" y="220.65"></rect></g><g class="entity" data-entity="o1" data-source-line="32" data-uid="ent0010" id="entity_o1"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17.2744" x="273.3628" y="206.9684">o1</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="276" y="220.65"></rect></g><!--entity INTR1--><g class="entity" data-entity="INTR1" data-source-line="33" data-uid="ent0011" id="entity_INTR1"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="85.3311" x="394.5" y="292.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.3311" x="404.5" y="314.9684">Intrinsic A</text></g><!--entity INTR2--><g class="entity" data-entity="INTR2" data-source-line="34" data-uid="ent0012" id="entity_INTR2"><rect fill="#ADD8E6" height="34" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1;" width="85.3311" x="514.5" y="292.65"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.3311" x="524.5" y="314.9684">Intrinsic A</text></g><!--link C1 to C2--><!--link BPF1 to BPFC1--><!--reverse link BPFC2 to BPF2--><!--link INTR1 to INTR2--><!--link BPF1 to i1--><g class="link" data-entity-1="BPF1" data-entity-2="i1" data-source-line="44" data-uid="lnk18" id="link_BPF1_i1"><path d="M85.07,153.79 C92.54,166.38 107.74,188.84 127,200.65 C161.13,221.57 205.0929,224.812 222.6329,225.362" fill="none" id="BPF1-to-i1" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="228.63,225.55,219.7598,221.2699,223.6325,225.3933,219.5091,229.266,228.63,225.55" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link BPF2 to i1--><g class="link" data-entity-1="BPF2" data-entity-2="i1" data-source-line="45" data-uid="lnk19" id="link_BPF2_i1"><path d="M339.17,153.75 C334.79,166.3 325.15,188.7 309,200.65 C290.63,214.24 280.34,204.47 259,212.65 C252.63,215.09 250.9644,215.7955 246.2344,218.6555" fill="none" id="BPF2-to-i1" style="stroke:#B22222;stroke-width:1;"></path><polygon fill="#B22222" points="241.1,221.76,250.8713,220.5262,245.3787,219.1729,246.7319,213.6803,241.1,221.76" style="stroke:#B22222;stroke-width:1;"></polygon></g><!--link o1 to BPFC1--><g class="link" data-entity-1="o1" data-entity-2="BPFC1" data-source-line="47" data-uid="lnk20" id="link_o1_BPFC1"><path d="M275.89,221.02 C260.76,209.57 225.774,183.0812 200.924,164.2712" fill="none" id="o1-to-BPFC1" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="196.14,160.65,200.9019,169.2712,200.1267,163.6677,205.7302,162.8925,196.14,160.65" style="stroke:#4682B4;stroke-width:1;"></polygon></g><!--link o1 to BPFC2--><g class="link" data-entity-1="o1" data-entity-2="BPFC2" data-source-line="48" data-uid="lnk21" id="link_o1_BPFC2"><path d="M288.3,225.52 C305.65,224.88 355.09,221.25 389,200.65 C405.2,190.81 415.3746,178.6175 423.8946,165.8775" fill="none" id="o1-to-BPFC2" style="stroke:#4682B4;stroke-width:1;"></path><polygon fill="#4682B4" points="427.23,160.89,418.9019,166.1476,424.4505,165.0462,425.5518,170.5948,427.23,160.89" style="stroke:#4682B4;stroke-width:1;"></polygon></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201.4072" x="203.2964" y="360.9684">図１１： Executing BPF programs.</text><!--SRC=[ZL9BJiCm4Dtx5ADqmQgbyHeXqOgYIb1LBHKBO66S8RK8TZHs-Qg7O0l7OCjrM7C57AU1DgM05LdEcvdtniyZHUwKqH2zlxn-l3s5xndsxr3EdD8fT8OzoCca9AvjAs8xrjrdk0j-iMAJWfB7S2fMHyYh0p8pdNHDPWWQnrDbNOPV2OTAeyVabKPh8GxuFEo4qWcTPWY_q0r5Bkx5oLJb_s2KYkGANSzeDrOF237VAE58Q9iBGkqsIBHNyBBg8lCqN_YHe5JffSIXI9B2o_QYkvtjqaN6jWOcGLQO2D748bLMGno1iD2D5-sN6SLRb05_Yg5ngDAfwsGphEUSQUdlscgrgkJkIlRy9qLUAlAw8Ayu-6P1lYx8LmM_dpSw64wWhnqfRPM4CT8DKYWRBIwR6_AZ1ofU_ZDnRKoYRuwzKDuV78_MJFaZlzObypurgG1Efof9K9ytTxqbZ0M_roB1M1QiQMPuMGznLhQqLXUKMSMQc5ljGULxxod23lb9WmNhpp5cV5cb3usnGyp23PPmlen_0W00]--></g></svg></p><p>この「トランポリン」処理は、OSのスレッドコンテキストスイッチを必要としない。
なぜなら、BPFバイトコードは使用するすべてのメモリに対して明確に定義されたコンテキストを持っているからである。</p>
<p>eBPFのバックエンドは2015年からLLVMに組み込まれており、任意のLLVMフロントエンド言語でスマートコントラクトを書くことができる。</p>
<p>また、eBPFは2015年以降Linuxカーネルにも搭載されており、最初のバイトコードは1992年から存在している。</p>
<p>eBPFは1パスで正当性の確認、実行時間とメモリ要件の把握、そしてx86命令への変換が可能である。</p>
<h2 id="references">References </h2>
<p><span id="ref-01">[1]</span> Liskov, Practical use of Clocks<br>
<a href="http://www.dainf.cefetpr.br/tacla/SDII/PracticalUseOfClocks.pdf">http://www.dainf.cefetpr.br/tacla/SDII/PracticalUseOfClocks.pdf</a></p>
<p><span id="ref-02">[2]</span> Google Spanner TrueTime consistency<br>
<a href="https://cloud.google.com/spanner/docs/true-time-external-consistency">https://cloud.google.com/spanner/docs/true-time-external-consistency</a></p>
<p><span id="ref-03">[3]</span> Solving Agreement with Ordering Oracles<br>
<a href="http://www.inf.usi.ch/faculty/pedone/Paper/2002/2002EDCCb.pdf">http://www.inf.usi.ch/faculty/pedone/Paper/2002/2002EDCCb.pdf</a></p>
<p><span id="ref-04">[4]</span> Tendermint: Consensus without Mining<br>
<a href="https://tendermint.com/static/docs/tendermint.pdf">https://tendermint.com/static/docs/tendermint.pdf</a></p>
<p><span id="ref-05">[5]</span> Hedera: A Governing Council &amp; Public Hashgraph Network<br>
<a href="https://s3.amazonaws.com/hedera-hashgraph/hh-whitepaper-v1.0-180313.pdf">https://s3.amazonaws.com/hedera-hashgraph/hh-whitepaper-v1.0-180313.pdf</a></p>
<p><span id="ref-06">[6]</span> Filecoin, proof of replication,<br>
<a href="https://filecoin.io/proof-of-replication.pdf">https://filecoin.io/proof-of-replication.pdf</a></p>
<p><span id="ref-07">[7]</span> Slasher, A punative Proof of Stake algorithm<br>
<a href="https://blog.ethereum.org/2014/01/15/slasher-a-punitive-proof-of-stake-algorithm/">https://blog.ethereum.org/2014/01/15/slasher-a-punitive-proof-of-stake-algorithm/</a></p>
<p><span id="ref-08">[8]</span> BitShares Delegated Proof of Stake<br>
<a href="https://github.com/BitShares/bitshares/wiki/Delegated-Proof-of-Stake">https://github.com/BitShares/bitshares/wiki/Delegated-Proof-of-Stake</a></p>
<p><span id="ref-09">[9]</span> An E cient Elliptic Curve Cryptography Signature Server With GPU Acceleration<br>
<a href="http://ieeexplore.ieee.org/document/7555336/">http://ieeexplore.ieee.org/document/7555336/</a></p>
<p><span id="ref-10">[10]</span> Casper the Friendly Finality Gadget<br>
<a href="https://arxiv.org/pdf/1710.09437.pdf">https://arxiv.org/pdf/1710.09437.pdf</a></p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>